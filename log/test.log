  [1m[36m (137.7ms)[0m  [1mCREATE TABLE "ckeditor_assets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data_file_name" varchar(255) NOT NULL, "data_content_type" varchar(255), "data_file_size" integer, "assetable_id" integer, "assetable_type" varchar(30), "type" varchar(30), "width" integer, "height" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  select sqlite_version(*)
  [1m[36m (110.1ms)[0m  [1mCREATE  INDEX "idx_ckeditor_assetable" ON "ckeditor_assets" ("assetable_type", "assetable_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='idx_ckeditor_assetable' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='idx_ckeditor_assetable' AND type='index'

  [1m[36m (122.4ms)[0m  [1mCREATE  INDEX "idx_ckeditor_assetable_type" ON "ckeditor_assets" ("assetable_type", "type", "assetable_id")[0m
  [1m[35m (138.4ms)[0m  CREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (143.8ms)[0m  [1mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
  [1m[35m (143.1ms)[0m  CREATE TABLE "documents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "docable_id" integer, "docable_type" varchar(255), "file" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (198.8ms)[0m  [1mCREATE TABLE "homeworks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "student_id" integer, "lecture_id" integer, "created_at" datetime, "updated_at" datetime, "score" integer) [0m
  [1m[35m (121.8ms)[0m  CREATE UNIQUE INDEX "index_homeworks_on_lecture_id_and_student_id" ON "homeworks" ("lecture_id", "student_id")
  [1m[36m (121.1ms)[0m  [1mCREATE TABLE "lectures" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "subject_id" integer, "teacher_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (121.0ms)[0m  CREATE TABLE "notices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "text" varchar(255), "noticable_id" integer, "noticable_type" varchar(255), "state" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (122.7ms)[0m  [1mCREATE TABLE "students" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) DEFAULT 'Ð£Ñ‡ÐµÐ½Ð¸Ðº', "email" varchar(255), "password_digest" varchar(255), "confirmation_token" varchar(255), "state" varchar(255), "grade" integer DEFAULT 9, "created_at" datetime, "updated_at" datetime, "avatar" varchar(255), "birthday" date, "phone" varchar(255), "city" varchar(255), "surname" varchar(255), "middlename" varchar(255), "school" varchar(255), "reset_password_token" varchar(255)) [0m
  [1m[35m (122.0ms)[0m  CREATE UNIQUE INDEX "index_students_on_email" ON "students" ("email")
  [1m[36m (587.3ms)[0m  [1mCREATE TABLE "subject_students" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "student_id" integer, "subject_id" integer, "created_at" datetime, "updated_at" datetime, "average_score" integer DEFAULT 0, "homeworks_count" integer DEFAULT 0) [0m
  [1m[35m (121.9ms)[0m  CREATE UNIQUE INDEX "index_subject_students_on_subject_id_and_student_id" ON "subject_students" ("subject_id", "student_id")
  [1m[36m (143.4ms)[0m  [1mCREATE TABLE "subject_teachers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "teacher_id" integer, "subject_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (144.0ms)[0m  CREATE UNIQUE INDEX "index_subject_teachers_on_subject_id_and_teacher_id" ON "subject_teachers" ("subject_id", "teacher_id")
  [1m[36m (121.5ms)[0m  [1mCREATE TABLE "subjects" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime, "updated_at" datetime, "average_score" integer DEFAULT 0) [0m
  [1m[35m (131.9ms)[0m  CREATE TABLE "teachers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) DEFAULT 'ÐŸÑ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»ÑŒ', "email" varchar(255), "password_digest" varchar(255), "confirmation_token" varchar(255), "state" varchar(255), "created_at" datetime, "updated_at" datetime, "avatar" varchar(255), "birthday" date, "phone" varchar(255), "city" varchar(255), "surname" varchar(255), "middlename" varchar(255), "reset_password_token" varchar(255)) 
  [1m[36m (121.8ms)[0m  [1mCREATE UNIQUE INDEX "index_teachers_on_email" ON "teachers" ("email")[0m
  [1m[35m (121.0ms)[0m  CREATE TABLE "videos" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "lecture_id" integer, "code" text, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (134.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (155.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (144.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140721090330')
  [1m[36m (122.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140714161723')[0m
  [1m[35m (144.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140714113442')
  [1m[36m (133.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140714093742')[0m
  [1m[35m (122.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140717141218')
  [1m[36m (122.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140715120631')[0m
  [1m[35m (122.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140714113517')
  [1m[36m (122.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140717110209')[0m
  [1m[35m (122.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140714113321')
  [1m[36m (111.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140716102924')[0m
  [1m[35m (147.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140711210857')
  [1m[36m (144.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140714161722')[0m
  [1m[35m (144.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140716102009')
  [1m[36m (144.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140717150808')[0m
  [1m[35m (145.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140717093902')
  [1m[36m (144.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140714113410')[0m
  [1m[35m (122.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140714121308')
  [1m[36m (122.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140717103751')[0m
  [1m[35m (122.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140714113234')
  [1m[36m (122.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140716113545')[0m
  [1m[35m (122.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140714113458')
  [1m[36m (147.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20140711101704')[0m
  [1m[35m (133.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140715105133')
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "teachers"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-22 11:53:42', '2014-07-22 11:53:42', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-22 11:53:42', '2014-07-22 11:53:42', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "students"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-22 11:53:42', '2014-07-22 11:53:42', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-22 11:53:42', '2014-07-22 11:53:42', 298486374)
  [1m[36m (165.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
StudentsControllerTest: test_should_create_with_invalid_params
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "qsq_Aimly4Z7_gJm5-2Ccg"], ["created_at", "2014-07-22 11:53:42.732430"], ["email", "lorem@ziemann.org"], ["name", "Student"], ["password_digest", "$2a$04$ubFZ0Ix5PfeHTXie1pSY6.NPA5XKq.re0SH4OtCy65xhBaW1MiFZm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:42.732430"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:42.749483"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:42.749483"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#create as JSON
  Parameters: {"student"=>{"email"=>"florentiyygmail.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUsers::StudentRegistrationType Exists (0.1ms)[0m  SELECT  1 AS one FROM "students"  WHERE "students"."email" = 'florentiyygmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 20ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
StudentsControllerTest: test_should_create_with_valid_params
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "yaaX8br3WLkCdgkL2-gs5g"], ["created_at", "2014-07-22 11:53:42.778714"], ["email", "lorem@greenfelder.net"], ["name", "Student"], ["password_digest", "$2a$04$3hdp7QTKp8AzrFDxW7CgbuuUF2TbGgq2h.x5OPJUMR1I6FQueO046"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:42.778714"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:42.781650"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:42.781650"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#create as JSON
  Parameters: {"student"=>{"email"=>"florentiyy@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUsers::StudentRegistrationType Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "students"  WHERE "students"."email" = 'florentiyy@gmail.com' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["confirmation_token", "BgOoSJ9sMaM0lGlG0GEGeA"], ["created_at", "2014-07-22 11:53:42.787966"], ["email", "florentiyy@gmail.com"], ["password_digest", "$2a$04$tRD1P.QI26JgskyaQGts6O1nkrXpHbUKSMAc3Az4KXDOjQ8iEmedO"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:42.787966"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m

UserMailer#confirmation_email: processed outbound mail in 113.7ms

Sent mail to florentiyy@gmail.com (27.7ms)
Date: Tue, 22 Jul 2014 15:53:42 +0400
From: fansarmailer@gmail.com
To: florentiyy@gmail.com
Message-ID: <53ce50c6e7efe_1c21110fe904831e@olegeg-RC530-RC730.mail>
Subject: =?UTF-8?Q?=D0=9F=D0=BE=D0=B4=D1=82=D0=B2=D0=B5=D1=80=D0=B6=D0=B4=D0=B5=D0=BD=D0=B8=D0=B5?=
 =?UTF-8?Q?_=D1=80=D0=B5=D0=B3=D0=B8=D1=81=D1=82=D1=80=D0=B0=D1=86=D0=B8=D0=B8?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: base64

0JfQtNGA0LDQstGB0YLQstGD0LnRgtC1LCDQo9GH0LXQvdC40LoK0J/QvtC0
0YLQstC10YDQtNC40YLQtSDRgdCy0L7QuSDQsNC60LrQsNGD0L3Rgi4K0KHR
i9C70LvQutCwINC00LvRjyDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyA6
IAo8YSBocmVmPSJodHRwOi8vbG9jYWxob3N0OjMwMDAvc3R1ZGVudHMvOTgw
MTkwOTY0L3JlZ2lzdHJhdGlvbl9jb25maXJtP2NvbmZpcm1hdGlvbl90b2tl
bj1CZ09vU0o5c01hTTBsR2xHMEdFR2VBIj7Qn9C+0LTRgtCy0LXRgNC00LjR
gtGMINCw0LrQutCw0YPQvdGCPC9hPgo=

Completed 201 Created in 205ms (Views: 33.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
StudentsControllerTest: test_should_destroy_with_autorized_student
------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "nmA8-J0XBKtnpCRWuhB_Bg"], ["created_at", "2014-07-22 11:53:42.994471"], ["email", "lorem@stark.org"], ["name", "Student"], ["password_digest", "$2a$04$M.Ta4rjTfJU4VVuhfFsNpOfiIeGmqZYqAbdG45nBmdLejhGYTCNZW"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:42.994471"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:42.997423"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:42.997423"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mStudent Load (0.2ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHomework Load (0.1ms)[0m  SELECT "homeworks".* FROM "homeworks"  WHERE "homeworks"."student_id" = ?  [["student_id", 980190963]]
  [1m[36mNotice Load (0.1ms)[0m  [1mSELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?[0m  [["noticable_id", 980190963], ["noticable_type", "Student"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "students" WHERE "students"."id" = ?  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 1.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
StudentsControllerTest: test_should_destroy_with_unauthorized_user
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "1UcoDNxWAsfsDwG1MeTeQQ"], ["created_at", "2014-07-22 11:53:43.022514"], ["email", "lorem@mosciskibernier.org"], ["name", "Student"], ["password_digest", "$2a$04$u4iIwxx97vjB5ajD5sG0W.tXkfo.ZPTaWopeO7Z7zKTlYK1bvVbAG"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.022514"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.025740"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.025740"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "FqPXBVXIK2geMtk_xQ7gPw"], ["created_at", "2014-07-22 11:53:43.029278"], ["email", "lorem@wittingspinka.biz"], ["name", "Student"], ["password_digest", "$2a$04$xZr2FT.C5UFr.Cms9dg2PeLoiQfXWk5Hehyu3Me5DClGs/1HYoMC6"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.029278"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
Filter chain halted as :authorize_student rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
StudentsControllerTest: test_should_index_with_with_authenticated_user
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "bfFe4hEaIvvNT_agNcMDdg"], ["created_at", "2014-07-22 11:53:43.037445"], ["email", "lorem@ratke.com"], ["name", "Student"], ["password_digest", "$2a$04$YNrEeAbEVMx5OqVNzmiiIOYISj023JCJzR13nnuapSAJMBcT.YhUG"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.037445"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.040104"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.040104"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#index as JSON
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.2ms)[0m  [1mSELECT "students".* FROM "students"[0m
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
StudentsControllerTest: test_should_index_with_with_unauthenticated_user
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "kXzF9QWcJLor9rfRGhYCRA"], ["created_at", "2014-07-22 11:53:43.049866"], ["email", "lorem@jacobsonwitting.biz"], ["name", "Student"], ["password_digest", "$2a$04$HxhNlLeQf1YcMwPq409b9OFC.yqtovaqOKi6Wh.w8lvktvqu.duhi"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.049866"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.052936"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.052936"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#index as JSON
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
StudentsControllerTest: test_should_registration_confirm
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Uu0BTQs7m6Joneim_J1GAg"], ["created_at", "2014-07-22 11:53:43.059687"], ["email", "lorem@runolfon.info"], ["name", "Student"], ["password_digest", "$2a$04$vHVmaZXE29Au0iZOw3GoGealY2q0cYO9iBuM84Z08wMR/Sku7Yily"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.059687"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.062479"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.062479"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#registration_confirm as JSON
  Parameters: {"confirmation_token"=>"Uu0BTQs7m6Joneim_J1GAg", "id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "students" SET "confirmation_token" = ?, "state" = ?, "updated_at" = ? WHERE "students"."id" = 980190963  [["confirmation_token", "YXPKzmHq003-X0S-qZZf_g"], ["state", "active"], ["updated_at", "2014-07-22 11:53:43.066505"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_authenticated_student
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "heqzjj9xWVrG2SqapyxX8Q"], ["created_at", "2014-07-22 11:53:43.072649"], ["email", "lorem@feeneyschultz.biz"], ["name", "Student"], ["password_digest", "$2a$04$EOGlEM5aGNBqE.kR1hkMOuZcWiVNw2zRqJbEU6AwAmnL3hz5qLLmG"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.072649"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.075330"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.075330"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mNotice Load (0.1ms)[0m  SELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?  [["noticable_id", 980190963], ["noticable_type", "Student"]]
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_unauthenticated_student
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "jCrwwHM_K2y2YcAOQ4UrDA"], ["created_at", "2014-07-22 11:53:43.086152"], ["email", "lorem@howe.info"], ["name", "Student"], ["password_digest", "$2a$04$07GjpFb5qVHFIigVyRWxC.5FRkQJgbQJI6j.Xg0oAARODqbyUbAfC"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.086152"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.088826"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.088826"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_unauthenticated_user
------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "T5BrzMIXRcxYf8sRhVrvmg"], ["created_at", "2014-07-22 11:53:43.095891"], ["email", "lorem@moriettebayer.biz"], ["name", "Student"], ["password_digest", "$2a$04$o4ppRg7Po9ZYBtsyQcvuBeURANh1n0yQxt9IapcbvoTKMCq2Oyuk2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.095891"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.098600"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.098600"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
StudentsControllerTest: test_should_subscribe_to_subject_with_student
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "qQjb-S9SDqem60Clnx8NKw"], ["created_at", "2014-07-22 11:53:43.105517"], ["email", "lorem@bernhard.name"], ["name", "Student"], ["password_digest", "$2a$04$5BgGxg.cZsV8N9woOt9hwOHTNADwihHeO4kjjwYMBTtQsziA290pq"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.105517"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.108425"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.108425"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#subscribe_to_subject as JSON
  Parameters: {"subject_id"=>1, "id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mSubject Load (0.1ms)[0m  [1mSELECT  "subjects".* FROM "subjects"  WHERE "subjects"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubjectStudent Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subject_students"  WHERE ("subject_students"."student_id" = 980190963 AND "subject_students"."subject_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subject_students" ("created_at", "student_id", "subject_id", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.167458"], ["student_id", 980190963], ["subject_id", 1], ["updated_at", "2014-07-22 11:53:43.167458"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 57ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
StudentsControllerTest: test_should_update_password
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "jMDC4N9tXkdWH0cZ9SPWKw"], ["created_at", "2014-07-22 11:53:43.173137"], ["email", "lorem@balistreri.net"], ["name", "Student"], ["password_digest", "$2a$04$3KD/wQoOtCxwwhM5I/SrpeD96so4SRfrmp/gI.X3ckr0ERMlY6VB2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.173137"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.175940"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.175940"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#update_password as JSON
  Parameters: {"student"=>{"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mUsers::StudentPasswordUpdateType Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  UPDATE "students" SET "confirmation_token" = ?, "password_digest" = ?, "updated_at" = ? WHERE "students"."id" = 980190963  [["confirmation_token", "-gL7BmB9vYIHxWNQ8TaUNw"], ["password_digest", "$2a$04$ar/VwMEp53GXAhu9PbCBpu/rWcfCoaIo7aP5yHPFYpWODCgQxeiZ6"], ["updated_at", "2014-07-22 11:53:43.184392"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
StudentsControllerTest: test_should_update_with_unauthorized_user
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "NfMmqGl8xZ_zMd-iMQgu2w"], ["created_at", "2014-07-22 11:53:43.189993"], ["email", "lorem@macejkovic.org"], ["name", "Student"], ["password_digest", "$2a$04$F7DfsQZ9sTeXECnwxwLZFumJrRSQ9UNuBqVvoY8zVuWZBcXPU9/Y."], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.189993"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.192720"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.192720"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "cXM2dX_-oJBB1IeeSGm0qg"], ["created_at", "2014-07-22 11:53:43.196483"], ["email", "lorem@strosincollier.name"], ["name", "Student"], ["password_digest", "$2a$04$z7VHqdBXnhx1YuEk8siLhOWRfXss8hPNARfLQUZ8.SWf06XuMQz8W"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.196483"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#update as JSON
  Parameters: {"student"=>{"name"=>"Student", "password"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :authorize_student rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------
NoticesControllerTest: test_should_destroy_notice_with_authorize_user
---------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "notices" ("created_at", "text", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.210165"], ["text", "WOW text"], ["updated_at", "2014-07-22 11:53:43.210165"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "0zjHbsRH0xQI1J25fBbAxg"], ["created_at", "2014-07-22 11:53:43.223232"], ["email", "lorem@hermann.name"], ["name", "Alexander"], ["password_digest", "$2a$04$f.7BIrgGyaUztonrxNvwluyhgi927ZjdMMrnGD24O/m/d.VxpmAWG"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.223232"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
NoticesControllerTest: test_should_read_notice_with_authorize_user
------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "notices" ("created_at", "text", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.226617"], ["text", "WOW text"], ["updated_at", "2014-07-22 11:53:43.226617"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "J3p6OrEEIEw1W2iY6PxS4A"], ["created_at", "2014-07-22 11:53:43.230523"], ["email", "lorem@torphackett.info"], ["name", "Alexander"], ["password_digest", "$2a$04$tjdgRXtyIDiDxmw7OxsO3uwgBfIoZqUDnwAkqaOQBswO8cqf1iOg6"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.230523"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
HomeworksControllerTest: test_should_create_with_student
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "xJd1YeApQ31S6PX9UrJf6w"], ["created_at", "2014-07-22 11:53:43.240022"], ["email", "lorem@schinner.org"], ["name", "Student"], ["password_digest", "$2a$04$O3Lh6JItrhDHO7HLBYaMnelEXHmN5aOQ0mbx7rwXj1HNAJk227dQe"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.240022"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "8NDf_baQaRctRWtnoCcuaA"], ["created_at", "2014-07-22 11:53:43.245419"], ["email", "lorem@lebsack.com"], ["name", "Student"], ["password_digest", "$2a$04$IiqEAdDKe.wM2ekW1H0hV.cDzW.UsDvY43lR5P/AJw/zExuxKNQsW"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.245419"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "VWS93_cRo2KdFanwXVujjA"], ["created_at", "2014-07-22 11:53:43.259816"], ["email", "lorem@bogisich.org"], ["name", "Alexander"], ["password_digest", "$2a$04$TWw8HCRkBwEMLPKrZOjEweZp9MnTk2RdlbIj6/vFQ6xY1FNHsvsV6"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.259816"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.262570"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.262570"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.264291"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.264291"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.269768"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.269768"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "hVyEz8FoDsu8Fk6ucjvaEA"], ["created_at", "2014-07-22 11:53:43.275079"], ["email", "lorem@larson.name"], ["name", "Alexander"], ["password_digest", "$2a$04$kZSWlIWbol3TgNhL30EfSO/dk6vX/UvV3Ao2mgL.xk43ncqyE8HWm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.275079"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.276756"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.276756"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.277796"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190964], ["updated_at", "2014-07-22 11:53:43.277796"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#create as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"2"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mLecture Load (0.1ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHomeworkType Exists (0.1ms)[0m  SELECT  1 AS one FROM "homeworks"  WHERE ("homeworks"."student_id" = 980190964 AND "homeworks"."lecture_id" = 2) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.293028"], ["lecture_id", 2], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.293028"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------
HomeworksControllerTest: test_should_create_with_teacher
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "EGfE6uUBPAQbkZ6M6GpK5A"], ["created_at", "2014-07-22 11:53:43.299163"], ["email", "lorem@ankunding.biz"], ["name", "Student"], ["password_digest", "$2a$04$OkdQzuS2VuFTpg9lJICCP.M5BFhIic.yypq99PuEnfN8LZcb6U3YW"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.299163"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "LihfuTXZg_A1QiKkT7NQpw"], ["created_at", "2014-07-22 11:53:43.303168"], ["email", "lorem@christiansenglover.name"], ["name", "Student"], ["password_digest", "$2a$04$EX7Dfx8lgdYpj1gLrXokiOsQ9OTGOubiKMYvvKjb5pLVXcrO5y.Qu"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.303168"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "0EuNtBdkuARLeDYGFB7TRQ"], ["created_at", "2014-07-22 11:53:43.307456"], ["email", "lorem@hansen.org"], ["name", "Alexander"], ["password_digest", "$2a$04$59vzEU9WjslvKBnvLgtiL.SkGPOHdvNlF4qNryU610vmE9Jt/A2xu"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.307456"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.309285"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.309285"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.310444"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.310444"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.311760"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.311760"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "W6XHLGym1SJPVCpDD1D1MQ"], ["created_at", "2014-07-22 11:53:43.315874"], ["email", "lorem@rodriguezboehm.info"], ["name", "Alexander"], ["password_digest", "$2a$04$wey9Mh56S00c4tpEulfipOv8qoHqdEi5CKRhk95CCix/YuXT2x6Zy"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.315874"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.317351"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.317351"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.318452"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190964], ["updated_at", "2014-07-22 11:53:43.318452"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "mvmpZLIZzmpjOXbZXc395Q"], ["created_at", "2014-07-22 11:53:43.322360"], ["email", "lorem@wolff.name"], ["name", "Alexander"], ["password_digest", "$2a$04$nOPNQH2jDL42NphZbRNPfOknUTtha0iY3CWBS7qko9e9sNboDWkpy"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.322360"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#create as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"2"}
  [1m[36mTeacher Load (0.2ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190965]]
Filter chain halted as :homework_create_authorize rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------
HomeworksControllerTest: test_should_create_with_unauthenticated_user
---------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Ky8kffZBMXssqVmtAmhnew"], ["created_at", "2014-07-22 11:53:43.330640"], ["email", "lorem@lockman.net"], ["name", "Student"], ["password_digest", "$2a$04$j/.kqWSnonmq6Ah3nIVKyO4pHt8ptUYAhVxpLO4d1Vffq1xNEFs0i"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.330640"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "d0wM365SQAlmYCwdsaW1kg"], ["created_at", "2014-07-22 11:53:43.369753"], ["email", "lorem@leuschke.name"], ["name", "Student"], ["password_digest", "$2a$04$QzdpwinSRZsKA1bAhnlCROmWqKNv5t6VMMWWsntl5zYlM2q2GMRlO"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.369753"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "MIU93by_qPKq2KSyBEuJCQ"], ["created_at", "2014-07-22 11:53:43.374570"], ["email", "lorem@graham.name"], ["name", "Alexander"], ["password_digest", "$2a$04$reiN.jPbrZgrBq3kLDbSzeVD23YYW4VyatD8OFQVThOqqzl14WZY2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.374570"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.376586"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.376586"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.378013"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.378013"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.379493"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.379493"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "88-2Ia3wQ8OXpX_kWmwaXQ"], ["created_at", "2014-07-22 11:53:43.384903"], ["email", "lorem@hahnlang.com"], ["name", "Alexander"], ["password_digest", "$2a$04$YFydk0EQl4bm0yvXT1vwV.s2PUFuvJ/zOQcf26v5yKT2CbPeYpZIy"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.384903"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.387016"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.387016"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.388519"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190964], ["updated_at", "2014-07-22 11:53:43.388519"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#create as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"2"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------
HomeworksControllerTest: test_should_destroy_with_authorized_student
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "G4gd586Yn1ZdR6E6kTYoxQ"], ["created_at", "2014-07-22 11:53:43.396484"], ["email", "lorem@bogisich.org"], ["name", "Student"], ["password_digest", "$2a$04$XsMWjygl9VmEn3duwE1WMuK4jiA/q/qoYRHBFfJ7IPwGcO51ONqDC"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.396484"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "1lLqKnnMkv5ZKMMNjVwEhA"], ["created_at", "2014-07-22 11:53:43.401428"], ["email", "lorem@krajcik.name"], ["name", "Student"], ["password_digest", "$2a$04$SwRsVFl4Vnzv5tFlMMVjte2bxZLqO4ZqAkEZP./MLg1URDotyYgii"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.401428"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "-2vBnS0PQVp0AOJTTjPOBw"], ["created_at", "2014-07-22 11:53:43.449772"], ["email", "lorem@bernhard.info"], ["name", "Alexander"], ["password_digest", "$2a$04$r.An8.FadQat7fg5xmMcyuYLGSTczjJN1fqC0QtWOqTBewqmEuyB."], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.449772"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.451996"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.451996"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.453183"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.453183"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.454391"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.454391"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#destroy as JSON
  Parameters: {"lecture_id"=>"1", "id"=>"1"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mHomeworkType Load (0.1ms)[0m  SELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?[0m  [["docable_id", 1], ["docable_type", "Homework"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "homeworks" WHERE "homeworks"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLecture Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.473116"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/class 'SubjectStudent'\nmethod_name: :calculate_average_score_and_homeworks_count_for\nargs:\n- !ruby/ActiveRecord:Student\n  attributes:\n    id: 980190964\n    name: Student\n    email: lorem@krajcik.name\n    password_digest: $2a$04$SwRsVFl4Vnzv5tFlMMVjte2bxZLqO4ZqAkEZP./MLg1URDotyYgii\n    confirmation_token: 1lLqKnnMkv5ZKMMNjVwEhA\n    state: inactive\n    grade: 9\n    created_at: 2014-07-22 11:53:43.401428000 Z\n    updated_at: 2014-07-22 11:53:43.401428000 Z\n    avatar: \n    birthday: \n    phone: \n    city: \n    surname: \n    middlename: \n    school: \n    reset_password_token: \n- !ruby/ActiveRecord:Lecture\n  attributes:\n    id: 1\n    name: Lecture\n    subject_id: 1\n    teacher_id: 980190963\n    created_at: 2014-07-22 11:53:43.453183000 Z\n    updated_at: 2014-07-22 11:53:43.453183000 Z\n"], ["run_at", "2014-07-22 11:53:43.473017"], ["updated_at", "2014-07-22 11:53:43.473116"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
HomeworksControllerTest: test_should_destroy_with_unauthorized_student
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "nRIq8bW0slPXYlsw_02Zkg"], ["created_at", "2014-07-22 11:53:43.479111"], ["email", "lorem@jacobs.info"], ["name", "Student"], ["password_digest", "$2a$04$j9Vf9cexJtQM5huLltoL6uy3XPv9XIDoWERFgCiu1jkz151tDbcdK"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.479111"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "Uo2Vp8g6-pQUp3YwgHsiog"], ["created_at", "2014-07-22 11:53:43.483350"], ["email", "lorem@gerhold.net"], ["name", "Student"], ["password_digest", "$2a$04$jff4c9AWuG.gVEVix2LIhOis0MkUgLEbhtyFOwaBAVceZa24xOmTS"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.483350"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "JPL4KwsV-MP9HVhTEeU_Bw"], ["created_at", "2014-07-22 11:53:43.487977"], ["email", "lorem@langworth.com"], ["name", "Alexander"], ["password_digest", "$2a$04$Q.Z.3VoqzGkjQ2g1stk30efaTEDtesWukLj5/o2IAl7wHfv/pZ8sK"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.487977"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.489736"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.489736"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.490903"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.490903"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.492143"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.492143"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#destroy as JSON
  Parameters: {"lecture_id"=>"1", "id"=>"1"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mHomeworkType Load (0.0ms)[0m  [1mSELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
Filter chain halted as :homework_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------
HomeworksControllerTest: test_should_rate_homework_with_authorized_teacher
--------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "sJZefcg0uJ5af2K1UvI_Gw"], ["created_at", "2014-07-22 11:53:43.501574"], ["email", "lorem@kertzmann.info"], ["name", "Student"], ["password_digest", "$2a$04$4aXKq.Bswz0NzHmLogGB/egJ5FKIX9V1/BoF0eMnKzU0bL1DlnGQ6"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.501574"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "7BmsMdN8rTnPMxeEk6XGZQ"], ["created_at", "2014-07-22 11:53:43.506063"], ["email", "lorem@hyatt.org"], ["name", "Student"], ["password_digest", "$2a$04$x6DXA3I00sE2ekv0afhoROIvvDEHWko5vGZDXC/Oonz1iaIsoEStO"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.506063"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "O3aXLs2jdfDaFJ1bGLH_Qg"], ["created_at", "2014-07-22 11:53:43.510569"], ["email", "lorem@funk.name"], ["name", "Alexander"], ["password_digest", "$2a$04$tLNKHWgaslGKlzXyj6rdi.2UYSofM/1igRYF4ckeHtHJ8tFPROwm."], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.510569"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.512290"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.512290"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.513494"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.513494"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.514728"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.514728"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#rate as HTML
  Parameters: {"score"=>"100", "lecture_id"=>"1", "id"=>"1"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mHomeworkType Load (0.0ms)[0m  SELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mLecture Load (0.1ms)[0m  [1mSELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHomeworkType Exists (0.1ms)[0m  SELECT  1 AS one FROM "homeworks"  WHERE ("homeworks"."student_id" = 980190964 AND "homeworks"."id" != 1 AND "homeworks"."lecture_id" = 1) LIMIT 1
  [1m[36mDocument Load (0.0ms)[0m  [1mSELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?[0m  [["docable_id", 1], ["docable_type", "Homework"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "homeworks" SET "score" = ?, "updated_at" = ? WHERE "homeworks"."id" = 1  [["score", 100], ["updated_at", "2014-07-22 11:53:43.522346"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------
HomeworksControllerTest: test_should_update_with_authorized_student
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "-yADC9NFMH6UbvUTzO_hsQ"], ["created_at", "2014-07-22 11:53:43.527937"], ["email", "lorem@tremblay.com"], ["name", "Student"], ["password_digest", "$2a$04$e7y23zPMzmEh9l8QLJbVguPsuKIcyeKxuP54keiOPA3HyeqhOUtCO"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.527937"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "Tsm4bBn_1R1KWITcOZzKvw"], ["created_at", "2014-07-22 11:53:43.532131"], ["email", "lorem@beatty.biz"], ["name", "Student"], ["password_digest", "$2a$04$TzGV347hgB75R0xBF2yw3ef7165UhLdSaz8fwSVfBI88OMdYYfwJ."], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.532131"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "hkkK5KQ4MOyybQZT_einSQ"], ["created_at", "2014-07-22 11:53:43.536810"], ["email", "lorem@ernser.name"], ["name", "Alexander"], ["password_digest", "$2a$04$8SVGJJQt0Sq8e1CGJ1Qp0OgcE9dKJ.MnU6ySQKeDia4XVmsb./rxK"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.536810"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.538509"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.538509"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.539601"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.539601"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.540657"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.540657"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#update as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"1", "id"=>"1"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mHomeworkType Load (0.0ms)[0m  [1mSELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHomeworkType Exists (0.1ms)[0m  SELECT  1 AS one FROM "homeworks"  WHERE ("homeworks"."student_id" = 980190964 AND "homeworks"."id" != 1 AND "homeworks"."lecture_id" = 1) LIMIT 1
  [1m[36mDocument Load (0.0ms)[0m  [1mSELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?[0m  [["docable_id", 1], ["docable_type", "Homework"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 4ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
HomeworksControllerTest: test_should_update_with_unauthorized_student
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "G6j-8LKNZ_RBm5CMLQtqCA"], ["created_at", "2014-07-22 11:53:43.552268"], ["email", "lorem@willms.org"], ["name", "Student"], ["password_digest", "$2a$04$Z4ihq5mPwfUu0vJTEkUkaOHihYJwChSV7tBL9GR/2KuBPGYI5T6GW"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.552268"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "cHMCmk76UkZJ2l7n6OG2dg"], ["created_at", "2014-07-22 11:53:43.556343"], ["email", "lorem@marks.net"], ["name", "Student"], ["password_digest", "$2a$04$5s20rlz.5Od7aDM3TIJHSuQjyg2.e/ldKqqw7uS6DdHKf4ZcHdTBS"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.556343"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "dNryxE7SdcIHrClIrfuINQ"], ["created_at", "2014-07-22 11:53:43.560408"], ["email", "lorem@wisozk.info"], ["name", "Alexander"], ["password_digest", "$2a$04$F2yDZ6ulSX8CJtpqOJRVdOHvmtUna2zCY897qdSnaesKMxm/nExzS"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.560408"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.562154"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.562154"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.563358"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.563358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.564636"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-22 11:53:43.564636"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#update as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"1", "id"=>"1"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mHomeworkType Load (0.0ms)[0m  SELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
Filter chain halted as :homework_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
TeachersControllerTest: test_should_create
------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "-YkS7VxMxqGQ979XxrMIuA"], ["created_at", "2014-07-22 11:53:43.578433"], ["email", "lorem@funk.info"], ["name", "Alexander"], ["password_digest", "$2a$04$bVJcQf1VNqA/O3nJiaIA1OHap3nv8SwpSvPh.Znb26Uj0MilNRDFm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.578433"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#create as JSON
  Parameters: {"teacher"=>{"email"=>"1nsaffff@mail.ru", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUsers::TeacherRegistrationType Exists (0.1ms)[0m  SELECT  1 AS one FROM "teachers"  WHERE "teachers"."email" = '1nsaffff@mail.ru' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "zoqLdBFd1MWmCqbhlT3ImQ"], ["created_at", "2014-07-22 11:53:43.588789"], ["email", "1nsaffff@mail.ru"], ["password_digest", "$2a$04$H9v1Q/0xqPklUhy48e7oyeEWN/JzksZ2vMLgrsZ06PZPSKj5Xt5we"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.588789"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1

UserMailer#confirmation_email: processed outbound mail in 40.8ms

Sent mail to 1nsaffff@mail.ru (5.3ms)
Date: Tue, 22 Jul 2014 15:53:43 +0400
From: fansarmailer@gmail.com
To: 1nsaffff@mail.ru
Message-ID: <53ce50c79ff12_1c21110fe9048455@olegeg-RC530-RC730.mail>
Subject: =?UTF-8?Q?=D0=9F=D0=BE=D0=B4=D1=82=D0=B2=D0=B5=D1=80=D0=B6=D0=B4=D0=B5=D0=BD=D0=B8=D0=B5?=
 =?UTF-8?Q?_=D1=80=D0=B5=D0=B3=D0=B8=D1=81=D1=82=D1=80=D0=B0=D1=86=D0=B8=D0=B8?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: base64

0JfQtNGA0LDQstGB0YLQstGD0LnRgtC1LCDQn9GA0LXQv9C+0LTQsNCy0LDR
gtC10LvRjArQn9C+0LTRgtCy0LXRgNC00LjRgtC1INGB0LLQvtC5INCw0LrQ
utCw0YPQvdGCLgrQodGL0LvQu9C60LAg0LTQu9GPINC/0L7QtNGC0LLQtdGA
0LbQtNC10L3QuNGPIDogCjxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6MzAw
MC9zdHVkZW50cy85ODAxOTA5NjQvcmVnaXN0cmF0aW9uX2NvbmZpcm0/Y29u
ZmlybWF0aW9uX3Rva2VuPXpvcUxkQkZkMU1XbUNxYmhsVDNJbVEiPtCf0L7Q
tNGC0LLQtdGA0LTQuNGC0Ywg0LDQutC60LDRg9C90YI8L2E+Cg==

Completed 201 Created in 79ms (Views: 2.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------
TeachersControllerTest: test_should_destroy_with_authorized_teacher
-------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "zW7rO9KI04cGhBALvXw9Ew"], ["created_at", "2014-07-22 11:53:43.666675"], ["email", "lorem@sanford.name"], ["name", "Alexander"], ["password_digest", "$2a$04$cpfzDzxgXvTmrNcp.IjDSOS3JYPNVmI8CeQZx11Id1KkCf88HO3/K"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.666675"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLecture Load (0.1ms)[0m  SELECT "lectures".* FROM "lectures"  WHERE "lectures"."teacher_id" = ?  [["teacher_id", 980190963]]
  [1m[36mNotice Load (0.0ms)[0m  [1mSELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?[0m  [["noticable_id", 980190963], ["noticable_type", "Teacher"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "teachers" WHERE "teachers"."id" = ?  [["id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 1.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
TeachersControllerTest: test_should_destroy_with_unauthorized_user
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "c5PCpnelIhnlbk1TQftDZA"], ["created_at", "2014-07-22 11:53:43.681588"], ["email", "lorem@wilkinson.org"], ["name", "Alexander"], ["password_digest", "$2a$04$BBACkSK./D9KXAcw/2l51OozQwPARcKHxG4UfrNhJy8OLYsJufJT2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.681588"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "ZzV2NQEv490K35E0UXwZuA"], ["created_at", "2014-07-22 11:53:43.686552"], ["email", "lorem@watsica.info"], ["name", "Alexander"], ["password_digest", "$2a$04$Tw1iQ1.pXCo/3JRyYorOT.vqcb6rrVlJniicaRMKlDnrVTt/sbS/q"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.686552"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
Filter chain halted as :authorize_teacher rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
TeachersControllerTest: test_should_index_with_with_authenticated_user
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "o7kQx5FDO0lg2c5DJYFaUA"], ["created_at", "2014-07-22 11:53:43.695360"], ["email", "lorem@hilllleannon.org"], ["name", "Alexander"], ["password_digest", "$2a$04$Ic/AhyBwsszPxqFMkvK5mOjVr0fvG7iBAhHsjLj4U9uh/cQfRg.hm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.695360"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#index as JSON
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mTeacher Load (0.2ms)[0m  SELECT "teachers".* FROM "teachers"
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------
TeachersControllerTest: test_should_index_with_with_unauthenticated_user
------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "eFeGl0XbF4m_U6H7Sg5B_g"], ["created_at", "2014-07-22 11:53:43.706578"], ["email", "lorem@murphy.name"], ["name", "Alexander"], ["password_digest", "$2a$04$pjAuYb/sYwsk1yfzxQUMeuvCsQE6yD7zp5QPUPnYms92LdPqzUs9e"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.706578"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#index as JSON
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
TeachersControllerTest: test_should_registration_confirm
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "BRwpqGfGaG5oWQJjwTCBxA"], ["created_at", "2014-07-22 11:53:43.715278"], ["email", "lorem@bradtkeluettgen.name"], ["name", "Alexander"], ["password_digest", "$2a$04$0h/cmuIPzCDCJnaBr91WU.iTg00U.2sevRgcnxs4x6y7Ld7yzHwI6"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.715278"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#registration_confirm as JSON
  Parameters: {"confirmation_token"=>"BRwpqGfGaG5oWQJjwTCBxA", "id"=>"980190963"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "teachers" SET "confirmation_token" = ?, "state" = ?, "updated_at" = ? WHERE "teachers"."id" = 980190963[0m  [["confirmation_token", "vXOe-HVoSCC_OAb4LAacYA"], ["state", "active"], ["updated_at", "2014-07-22 11:53:43.721783"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 1.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
TeachersControllerTest: test_should_show_with_teacher
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "r_x_er43rIpqI0zQp4Oo5w"], ["created_at", "2014-07-22 11:53:43.730531"], ["email", "lorem@ward.name"], ["name", "Alexander"], ["password_digest", "$2a$04$BSPmu7.GC2NB/gCqdv.dQu4echgzYDz20SO0glIfcAY9lPY0f.pBy"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.730531"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#show as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mTeacher Load (0.3ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mNotice Load (0.1ms)[0m  SELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?  [["noticable_id", 980190963], ["noticable_type", "Teacher"]]
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
TeachersControllerTest: test_should_show_with_unauthenticated_user
------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "lAoEtmLv_Bw2CGqONX1t9g"], ["created_at", "2014-07-22 11:53:43.787828"], ["email", "lorem@schmeler.com"], ["name", "Alexander"], ["password_digest", "$2a$04$LQvYlBFL6HCZUfyQsm0pPe9kXmLthJrsWTMf4ndU0KutAzQOMoTRW"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.787828"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
TeachersControllerTest: test_should_update_password
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "X42riL77x1itfqP6htGHdA"], ["created_at", "2014-07-22 11:53:43.796462"], ["email", "lorem@altenwerthweinat.org"], ["name", "Alexander"], ["password_digest", "$2a$04$Oq/mIPH5jvC4pqNSE1oC6Ot/671mRHPuIPMHFhuPEmPJgXuDm41p."], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.796462"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#update_password as JSON
  Parameters: {"teacher"=>{"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mUsers::TeacherPasswordUpdateType Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "teachers" SET "confirmation_token" = ?, "password_digest" = ?, "updated_at" = ? WHERE "teachers"."id" = 980190963[0m  [["confirmation_token", "jL1ashmEYPCDybOhrGUDXw"], ["password_digest", "$2a$04$5g716C40Xmk9XTVGyhzFcuMWMLztfLK1ni8aR2ax4hjAQ6jZao3Zi"], ["updated_at", "2014-07-22 11:53:43.806194"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------
TeachersControllerTest: test_should_update_with_unauthorized_user
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "fQrQa9uLkCw6aSovLbYBsg"], ["created_at", "2014-07-22 11:53:43.812241"], ["email", "lorem@adamsdonnelly.org"], ["name", "Alexander"], ["password_digest", "$2a$04$944OljhJHinYB.6sg/E.buinMKwzEaSBEKURpa/CQ0Tl4x9jnVaKC"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.812241"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "VqrIeTrsjHSDrD3FNUj21A"], ["created_at", "2014-07-22 11:53:43.817121"], ["email", "lorem@pfannerstill.org"], ["name", "Alexander"], ["password_digest", "$2a$04$X6D21rkpCFkhKwUMUw0YrehaeCI2SSvcRG2MOR4xeNNR4VHuMNWyS"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.817121"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#update as JSON
  Parameters: {"teacher"=>{"name"=>"Alexander"}, "id"=>"980190963"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :authorize_teacher rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
LecturesControllerTest: test_should_create_with_invalid_params
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.826316"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.826316"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "LtoOuKdJ1jah16g_vwzewg"], ["created_at", "2014-07-22 11:53:43.830581"], ["email", "lorem@schowalterkunze.name"], ["name", "Alexander"], ["password_digest", "$2a$04$AYhyAao75zNRsqoSPQzT6.2r.L65Iw2e6X84hti2AMti9FqVWY8gC"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.830581"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.832484"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.832484"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.833607"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.833607"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "vj5UMHLX_se_69oIPKEDug"], ["created_at", "2014-07-22 11:53:43.837542"], ["email", "lorem@kohlerkeler.info"], ["name", "Student"], ["password_digest", "$2a$04$wzmxbTW2QWABGoyO1VWMN.zU8oVEyj0zHu9LQ.E5V9hNqbvOW0VN2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.837542"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Zjq6iJDKM9_CHT_34aF9WA"], ["created_at", "2014-07-22 11:53:43.841348"], ["email", "lorem@williamson.name"], ["name", "Alexander"], ["password_digest", "$2a$04$GywFWdVMpntqisDxoBdLT.xEsaRItQ6SEcs9IDBejOIgkaoUkJGhm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.841348"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#create as JSON
  Parameters: {"lecture"=>{"subject_id"=>1, "name"=>""}}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
LecturesControllerTest: test_should_create_with_student
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.856727"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.856727"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "GYWmHWcRSBs8VEMy94trJQ"], ["created_at", "2014-07-22 11:53:43.861499"], ["email", "lorem@labadie.com"], ["name", "Alexander"], ["password_digest", "$2a$04$t3XxpfZcKVuAYycJuSA6QeljiKSVK4.bLNu.CjO0FcqkrGxq6H/X2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.861499"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.863628"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.863628"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.865045"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.865045"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "fvx0S4otfqh_6LRx4CVWWg"], ["created_at", "2014-07-22 11:53:43.869962"], ["email", "lorem@mitchell.org"], ["name", "Student"], ["password_digest", "$2a$04$I22nZ6HnuYE6N039YVf43.Tc14ysq5B1rdc.pcqCFi8eDbs71k3Gq"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.869962"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "Qfk4m0-mzU8PyHX7kL9mbg"], ["created_at", "2014-07-22 11:53:43.874510"], ["email", "lorem@trompschroeder.name"], ["name", "Alexander"], ["password_digest", "$2a$04$TT5OpjoLWrj6MJ.wveAwIeHftUYvyRZMgDl7y3QQbqc59wwEXAHKm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.874510"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#create as JSON
  Parameters: {"lecture"=>{"name"=>"Lecture"}}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :lecture_create_authorize rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
LecturesControllerTest: test_should_create_with_valid_params
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.880977"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.880977"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "K0NzcW9v01gJTbJirgrr6A"], ["created_at", "2014-07-22 11:53:43.885903"], ["email", "lorem@wyman.com"], ["name", "Alexander"], ["password_digest", "$2a$04$FqR/oDfgjMh4xRoW6EeueuYQ9d.k1WrJEBU2rfnjxQv2Xr0Nav0F2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.885903"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.888052"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.888052"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.889667"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.889667"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "Scsbxq1BFyhtCYsA2A42XQ"], ["created_at", "2014-07-22 11:53:43.894581"], ["email", "lorem@hammes.info"], ["name", "Student"], ["password_digest", "$2a$04$lthp/.eR1NsAOOyvruvapuTD9w3oyfUx1Lz1y2j.TuVjFcwWyYJj2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.894581"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Yj-eq9hjwfaRXSLZHfZnoA"], ["created_at", "2014-07-22 11:53:43.899255"], ["email", "lorem@wilkinson.net"], ["name", "Alexander"], ["password_digest", "$2a$04$n6wv57i4ewbXAUIrCNjAB.ds6rL3Ylsnhoix4ix6gd3uo8Zd7ehPO"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.899255"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#create as JSON
  Parameters: {"lecture"=>{"subject_id"=>1, "name"=>"Lecture"}}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.904723"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.904723"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 9ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------
LecturesControllerTest: test_should_destroy_with_creator
--------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.912701"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.912701"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "kMQWsC5Jw_cctdLacQsFeg"], ["created_at", "2014-07-22 11:53:43.916796"], ["email", "lorem@treutel.net"], ["name", "Alexander"], ["password_digest", "$2a$04$nykx2pqLcBKJaeUFngnOIu/oEzSVbL9WEF3epuljLPZkZ8XEmfGai"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.916796"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.918578"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.918578"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.919713"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.919713"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "X5qWWJu-PhRnINRq_LWgXw"], ["created_at", "2014-07-22 11:53:43.923721"], ["email", "lorem@rippin.name"], ["name", "Student"], ["password_digest", "$2a$04$0PQAR1JRoOlpluUy6OZS3eFEs3I0G9LuPV5v1itQqMwn1MQZXHR4S"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.923721"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "R_XvuxH4WhGrqR6TTTQ3AA"], ["created_at", "2014-07-22 11:53:43.927566"], ["email", "lorem@oreilly.name"], ["name", "Alexander"], ["password_digest", "$2a$04$52T1quQrCOj7onyQ.szjlePkyGgwBq8kE6M.pW9wZ3qhRlBrww9re"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.927566"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mLectureType Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mDocument Load (0.0ms)[0m  [1mSELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?[0m  [["docable_id", 1], ["docable_type", "Lecture"]]
  [1m[35mVideo Load (0.1ms)[0m  SELECT "videos".* FROM "videos"  WHERE "videos"."lecture_id" = ?  [["lecture_id", 1]]
  [1m[36mHomework Load (0.1ms)[0m  [1mSELECT "homeworks".* FROM "homeworks"  WHERE "homeworks"."lecture_id" = ?[0m  [["lecture_id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "lectures" WHERE "lectures"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 2.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
LecturesControllerTest: test_should_destroy_with_not_creator
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.938795"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.938795"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "Re6XcL8c_PQkXhluSyjSDQ"], ["created_at", "2014-07-22 11:53:43.979246"], ["email", "lorem@jewe.net"], ["name", "Alexander"], ["password_digest", "$2a$04$Jp3tTMKQorjB6d5nbV.cpuLGVQuGtoGz8MCVXGGsjV/cXifO0D67S"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.979246"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:43.981299"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.981299"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:43.982436"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:43.982436"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "3VkabxIu19uA8rKerkEpFw"], ["created_at", "2014-07-22 11:53:43.987415"], ["email", "lorem@abernathy.net"], ["name", "Student"], ["password_digest", "$2a$04$Wd9fqWEKuix6J8k6TVn6MOBR7TV8T0en.R1E9NAWwuLMhUmrR..oa"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.987415"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "VZJMyUQWdsaCO0i00HZdgg"], ["created_at", "2014-07-22 11:53:43.991964"], ["email", "lorem@zieme.com"], ["name", "Alexander"], ["password_digest", "$2a$04$b2bES0UfiV3/n/fjlWOr/uWkESQ7LwllC29EQo3fmaqu.K30DaV/a"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:43.991964"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mLectureType Load (0.0ms)[0m  [1mSELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :lecture_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------
LecturesControllerTest: test_should_index_with_authenticate_user
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:43.998826"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:43.998826"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "8IUg225CX8lVtlCDefFr7g"], ["created_at", "2014-07-22 11:53:44.004369"], ["email", "lorem@morar.info"], ["name", "Alexander"], ["password_digest", "$2a$04$YdJ.Yv9QKglpkZTspO48suidTV/ZZK6srm9LAkJiQf6N6aENCLUSK"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.004369"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:44.007291"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.007291"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.009689"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:44.009689"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "aUwpfqJni2guj8fGA4Lk1A"], ["created_at", "2014-07-22 11:53:44.015270"], ["email", "lorem@rauoberbrunner.org"], ["name", "Student"], ["password_digest", "$2a$04$0XL9CGCX5d9AW1FEBMSLpOh0Qbys2eMl7C1114ZwuHdcN4iAyvUZy"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.015270"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "WBKu0LpOU9A7014edS2Jbg"], ["created_at", "2014-07-22 11:53:44.020173"], ["email", "lorem@rodriguez.net"], ["name", "Alexander"], ["password_digest", "$2a$04$jEaS7w42sdDhPJNusmW1l.ombuEudoqhhPyG85YwnnGtMQijkWRkG"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.020173"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#index as JSON
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mLecture Load (0.2ms)[0m  SELECT "lectures".* FROM "lectures"
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------
LecturesControllerTest: test_should_index_with_unauthenticate_user
------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:44.029486"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.029486"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "UjeFs7QLOBKWRcmeoxe_Aw"], ["created_at", "2014-07-22 11:53:44.035939"], ["email", "lorem@bernier.name"], ["name", "Alexander"], ["password_digest", "$2a$04$F6kGOkWzl/V/RVWmRSp5oOexga4PscCbMebzg/DYKALcMn3RyJ2b2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.035939"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:44.039467"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.039467"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.042248"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:44.042248"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "CctNZQSLh2TLVEu-butKUQ"], ["created_at", "2014-07-22 11:53:44.049075"], ["email", "lorem@dooleyhartmann.info"], ["name", "Student"], ["password_digest", "$2a$04$vSR1HcMPzG375GHgYmDeteC2HoxTc.cCHjb04CsDVNFb9X4pAlPfa"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.049075"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "KxgMatx4EhRQn5v6ppVVFg"], ["created_at", "2014-07-22 11:53:44.055909"], ["email", "lorem@leffler.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$SSBhU5VN8ZSvbmD6DdnzYuP6JlbTPro.69VUUhkIbx9QAzuJjxSYy"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.055909"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#index as JSON
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
LecturesControllerTest: test_should_show_with_authenticate_user
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:44.061309"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.061309"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Ps_EK4GrsgUXFKihMQN9Ow"], ["created_at", "2014-07-22 11:53:44.066205"], ["email", "lorem@reichert.com"], ["name", "Alexander"], ["password_digest", "$2a$04$HzqCXSBoRmppBBCd/fomXuPXAZFmbKhA2LtuOVg.KYdR4wi7UpUs2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.066205"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:44.068636"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.068636"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.070373"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:44.070373"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "8gQRlG4Hsx2DaodE7tij9w"], ["created_at", "2014-07-22 11:53:44.075635"], ["email", "lorem@dickens.org"], ["name", "Student"], ["password_digest", "$2a$04$rIq7Lw18DZKo5ordKK10dOn.W6oStkPo9mWovN5BZnKu2lrB.Nbn."], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.075635"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "_LSgTQlHx17AdXIDfGJZUQ"], ["created_at", "2014-07-22 11:53:44.080188"], ["email", "lorem@binswolf.net"], ["name", "Alexander"], ["password_digest", "$2a$04$OnzcCEIHJABkCtYrg3NOBuaIYflyrWIp3q5p32LrfZTCiPaJlCys."], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.080188"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mLectureType Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mVideo Load (0.1ms)[0m  [1mSELECT "videos".* FROM "videos"  WHERE "videos"."lecture_id" = ?[0m  [["lecture_id", 1]]
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
LecturesControllerTest: test_should_show_with_unauthenticate_user
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.088749"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.088749"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "pb7BtS43YXIjS3DXVIEaBA"], ["created_at", "2014-07-22 11:53:44.093536"], ["email", "lorem@gerholdlockman.com"], ["name", "Alexander"], ["password_digest", "$2a$04$y/JJYTLXqLvR4USvJpULhORFDtWj/xoGPVDCUWiD0HPv6DvyuTZmm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.093536"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.095782"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.095782"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:44.097053"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:44.097053"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "DHT6pm5rFA6qLCxlRXnU5w"], ["created_at", "2014-07-22 11:53:44.101842"], ["email", "lorem@greenfelder.name"], ["name", "Student"], ["password_digest", "$2a$04$y1qpxSjP9xUPtuRCtd6oCOwQFDWT8Ms4mqZeRu5LuvqXp6huxIVm2"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.101842"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "UOqwUrU1IGf39GUkyAE2fA"], ["created_at", "2014-07-22 11:53:44.106301"], ["email", "lorem@bauch.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$M5oGCXjaW00hdirkoqzzAO6n8l2LDJeXhCKhl/o4c5SsSC7PdG06S"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.106301"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#show as JSON
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
LecturesControllerTest: test_should_update_with_creator
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.111394"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.111394"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "O4LMJiDZL-6LZDckfAW4CQ"], ["created_at", "2014-07-22 11:53:44.116070"], ["email", "lorem@rolfsonlittel.info"], ["name", "Alexander"], ["password_digest", "$2a$04$iHBvFhe1pla8mnn61ZqJA.AU9tfsJwkyQLrbDfcWS5W5c5hrfyiBe"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.116070"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.118572"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.118572"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-22 11:53:44.120357"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:44.120357"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "_It8FjQAlV_LQH6ej0u5JA"], ["created_at", "2014-07-22 11:53:44.125292"], ["email", "lorem@zemlak.biz"], ["name", "Student"], ["password_digest", "$2a$04$hhTaMtdR3gla/jmgQ.AaAOH1jej6iUxKjcXkMmMaYDdK4y1HoNzSi"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.125292"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "51o-V2JfCj5zLQ-jRNlmjw"], ["created_at", "2014-07-22 11:53:44.129441"], ["email", "lorem@hauck.org"], ["name", "Alexander"], ["password_digest", "$2a$04$rwG.ZlkqV72xgwVh6ZkXu.b6zA5juN.uxpqtedaC9OAM2W8aygz3e"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.129441"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#update as JSON
  Parameters: {"lecture"=>{"name"=>"Lecture"}, "id"=>"1"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mLectureType Load (0.0ms)[0m  [1mSELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mDocument Load (0.0ms)[0m  SELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?  [["docable_id", 1], ["docable_type", "Lecture"]]
  [1m[36mVideo Load (0.0ms)[0m  [1mSELECT "videos".* FROM "videos"  WHERE "videos"."lecture_id" = ?[0m  [["lecture_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 6ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------
LecturesControllerTest: test_should_update_with_not_creator
-----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:44.139999"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.139999"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "jBUoP-PIPUdZyMp6Q_cYsg"], ["created_at", "2014-07-22 11:53:44.145009"], ["email", "lorem@walker.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$nIVyCruuxfFVS0wIFxxxbePaBnG1mInsKc2DhRz/AzMPVNWqW.CQm"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.145009"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-22 11:53:44.147256"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-22 11:53:44.147256"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-22 11:53:44.148861"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-22 11:53:44.148861"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "AFaM49GRmHZR6ixuaAcO_Q"], ["created_at", "2014-07-22 11:53:44.153884"], ["email", "lorem@marks.name"], ["name", "Student"], ["password_digest", "$2a$04$H.nQifHM/CkYcBlywGxcxOm3G5RRq88vkzgc1GU9r9l1Z2Wu3mTeK"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.153884"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "v_6-v1q5T7Wmx6J2RUsAjg"], ["created_at", "2014-07-22 11:53:44.158612"], ["email", "lorem@morarkemmer.net"], ["name", "Alexander"], ["password_digest", "$2a$04$DZcRbPSISVMsbJbP3NAyQOpBtONz5qiU2aZASSKMuBEAQ1Zccuyoy"], ["state", "inactive"], ["updated_at", "2014-07-22 11:53:44.158612"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#update as JSON
  Parameters: {"lecture"=>{"name"=>"Lecture"}, "id"=>"1"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mLectureType Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
Filter chain halted as :lecture_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (160.3ms)[0m  CREATE TABLE "admins" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "email" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (121.0ms)[0m  [1mDROP TABLE "ckeditor_assets"[0m
  [1m[35m (122.2ms)[0m  CREATE TABLE "ckeditor_assets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data_file_name" varchar(255) NOT NULL, "data_content_type" varchar(255), "data_file_size" integer, "assetable_id" integer, "assetable_type" varchar(30), "type" varchar(30), "width" integer, "height" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (134.5ms)[0m  CREATE  INDEX "idx_ckeditor_assetable" ON "ckeditor_assets" ("assetable_type", "assetable_id")
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='idx_ckeditor_assetable' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='idx_ckeditor_assetable' AND type='index'
[0m
  [1m[35m (143.9ms)[0m  CREATE  INDEX "idx_ckeditor_assetable_type" ON "ckeditor_assets" ("assetable_type", "type", "assetable_id")
  [1m[36m (154.8ms)[0m  [1mDROP TABLE "delayed_jobs"[0m
  [1m[35m (139.3ms)[0m  CREATE TABLE "delayed_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" datetime, "locked_at" datetime, "failed_at" datetime, "locked_by" varchar(255), "queue" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (121.6ms)[0m  [1mCREATE  INDEX "delayed_jobs_priority" ON "delayed_jobs" ("priority", "run_at")[0m
  [1m[35m (121.2ms)[0m  DROP TABLE "documents"
  [1m[36m (133.4ms)[0m  [1mCREATE TABLE "documents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "docable_id" integer, "docable_type" varchar(255), "file" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (121.3ms)[0m  DROP TABLE "homeworks"
  [1m[36m (133.5ms)[0m  [1mCREATE TABLE "homeworks" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "student_id" integer, "lecture_id" integer, "created_at" datetime, "updated_at" datetime, "score" integer) [0m
  [1m[35m (122.4ms)[0m  CREATE UNIQUE INDEX "index_homeworks_on_lecture_id_and_student_id" ON "homeworks" ("lecture_id", "student_id")
  [1m[36m (123.3ms)[0m  [1mDROP TABLE "lectures"[0m
  [1m[35m (122.4ms)[0m  CREATE TABLE "lectures" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "subject_id" integer, "teacher_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (143.5ms)[0m  [1mDROP TABLE "notices"[0m
  [1m[35m (211.7ms)[0m  CREATE TABLE "notices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "text" varchar(255), "noticable_id" integer, "noticable_type" varchar(255), "state" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (121.2ms)[0m  [1mDROP TABLE "students"[0m
  [1m[35m (133.0ms)[0m  CREATE TABLE "students" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) DEFAULT 'Ð£Ñ‡ÐµÐ½Ð¸Ðº', "email" varchar(255), "password_digest" varchar(255), "confirmation_token" varchar(255), "state" varchar(255), "grade" integer DEFAULT 9, "created_at" datetime, "updated_at" datetime, "avatar" varchar(255), "birthday" date, "phone" varchar(255), "city" varchar(255), "surname" varchar(255), "middlename" varchar(255), "school" varchar(255), "reset_password_token" varchar(255)) 
  [1m[36m (121.7ms)[0m  [1mCREATE UNIQUE INDEX "index_students_on_email" ON "students" ("email")[0m
  [1m[35m (121.3ms)[0m  DROP TABLE "subject_students"
  [1m[36m (122.1ms)[0m  [1mCREATE TABLE "subject_students" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "student_id" integer, "subject_id" integer, "created_at" datetime, "updated_at" datetime, "average_score" integer DEFAULT 0, "homeworks_count" integer DEFAULT 0) [0m
  [1m[35m (132.9ms)[0m  CREATE UNIQUE INDEX "index_subject_students_on_subject_id_and_student_id" ON "subject_students" ("subject_id", "student_id")
  [1m[36m (122.2ms)[0m  [1mDROP TABLE "subject_teachers"[0m
  [1m[35m (124.2ms)[0m  CREATE TABLE "subject_teachers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "teacher_id" integer, "subject_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (145.0ms)[0m  [1mCREATE UNIQUE INDEX "index_subject_teachers_on_subject_id_and_teacher_id" ON "subject_teachers" ("subject_id", "teacher_id")[0m
  [1m[35m (132.5ms)[0m  DROP TABLE "subjects"
  [1m[36m (133.3ms)[0m  [1mCREATE TABLE "subjects" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime, "updated_at" datetime, "average_score" integer DEFAULT 0) [0m
  [1m[35m (154.7ms)[0m  DROP TABLE "teachers"
  [1m[36m (133.3ms)[0m  [1mCREATE TABLE "teachers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) DEFAULT 'ÐŸÑ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»ÑŒ', "email" varchar(255), "password_digest" varchar(255), "confirmation_token" varchar(255), "state" varchar(255), "created_at" datetime, "updated_at" datetime, "avatar" varchar(255), "birthday" date, "phone" varchar(255), "city" varchar(255), "surname" varchar(255), "middlename" varchar(255), "reset_password_token" varchar(255)) [0m
  [1m[35m (121.7ms)[0m  CREATE UNIQUE INDEX "index_teachers_on_email" ON "teachers" ("email")
  [1m[36m (132.4ms)[0m  [1mDROP TABLE "videos"[0m
  [1m[35m (133.6ms)[0m  CREATE TABLE "videos" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "lecture_id" integer, "code" text, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (120.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140730112233')
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "teachers"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-31 10:09:11', '2014-07-31 10:09:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-31 10:09:11', '2014-07-31 10:09:11', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "students"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-31 10:09:11', '2014-07-31 10:09:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-31 10:09:11', '2014-07-31 10:09:11', 298486374)
  [1m[36m (140.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
--------------------------------------------------------------
StudentsControllerTest: test_should_create_with_invalid_params
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "_V0mBrUFjAWAtLO2oYDq6A"], ["created_at", "2014-07-31 10:09:12.213146"], ["email", "lorem@gerlach.name"], ["name", "Student"], ["password_digest", "$2a$04$iM2s0ns4Nzqea12RUtRaHO0AKczdOpbV2O0lcW15wd/4XNkmqrA2m"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.213146"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:09:12.247908"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.247908"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#create as JSON
  Parameters: {"student"=>{"email"=>"florentiyygmail.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUsers::StudentRegistrationType Exists (0.1ms)[0m  SELECT  1 AS one FROM "students"  WHERE "students"."email" = 'florentiyygmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 23ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
StudentsControllerTest: test_should_create_with_valid_params
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "_0-MPEXWjKPhS6JZq0lG4Q"], ["created_at", "2014-07-31 10:09:12.333300"], ["email", "lorem@heel.net"], ["name", "Student"], ["password_digest", "$2a$04$o9l3gxI2sBhpBW5ozzlHIeKBlwdQjHDyZD/P2w4Vd53Bvs7Zs5gia"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.333300"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.335962"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.335962"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#create as JSON
  Parameters: {"student"=>{"email"=>"florentiyy@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUsers::StudentRegistrationType Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "students"  WHERE "students"."email" = 'florentiyy@gmail.com' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["confirmation_token", "d3VSyNP9kzrgdzOVl_fwfg"], ["created_at", "2014-07-31 10:09:12.342257"], ["email", "florentiyy@gmail.com"], ["password_digest", "$2a$04$t9QAbSHEkMEi9Vr98haAiew3OUUS9n6pBfCPCy2VLXemcM3bqOdcW"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.342257"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m

UserMailer#confirmation_email: processed outbound mail in 56.3ms

Sent mail to florentiyy@gmail.com (7.7ms)
Date: Thu, 31 Jul 2014 14:09:12 +0400
From: fansarmailer@gmail.com
To: florentiyy@gmail.com
Message-ID: <53da15c868404_1a1ed43e883578d@olegeg-RC530-RC730.mail>
Subject: =?UTF-8?Q?=D0=9F=D0=BE=D0=B4=D1=82=D0=B2=D0=B5=D1=80=D0=B6=D0=B4=D0=B5=D0=BD=D0=B8=D0=B5?=
 =?UTF-8?Q?_=D1=80=D0=B5=D0=B3=D0=B8=D1=81=D1=82=D1=80=D0=B0=D1=86=D0=B8=D0=B8?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: base64

0JfQtNGA0LDQstGB0YLQstGD0LnRgtC1LCDQo9GH0LXQvdC40LoK0J/QvtC0
0YLQstC10YDQtNC40YLQtSDRgdCy0L7QuSDQsNC60LrQsNGD0L3Rgi4K0KHR
i9C70LvQutCwINC00LvRjyDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyA6
IAo8YSBocmVmPSJodHRwOi8vbG9jYWxob3N0OjMwMDAvc3R1ZGVudHMvOTgw
MTkwOTY0L3JlZ2lzdHJhdGlvbl9jb25maXJtP2NvbmZpcm1hdGlvbl90b2tl
bj1kM1ZTeU5QOWt6cmdkek9WbF9md2ZnIj7Qn9C+0LTRgtCy0LXRgNC00LjR
gtGMINCw0LrQutCw0YPQvdGCPC9hPgo=

Completed 201 Created in 125ms (Views: 31.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
StudentsControllerTest: test_should_destroy_with_autorized_student
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "BF1I2yse2rVrUiV74TfuxA"], ["created_at", "2014-07-31 10:09:12.467495"], ["email", "lorem@dietrichwiegand.net"], ["name", "Student"], ["password_digest", "$2a$04$QL8XSed0IY1ekKlRDqLy9OQPN8EngIgoDlNLm9c4BkB.IcilQrGtK"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.467495"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.470078"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.470078"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mStudent Load (0.2ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHomework Load (0.1ms)[0m  SELECT "homeworks".* FROM "homeworks"  WHERE "homeworks"."student_id" = ?  [["student_id", 980190963]]
  [1m[36mNotice Load (0.1ms)[0m  [1mSELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?[0m  [["noticable_id", 980190963], ["noticable_type", "Student"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "students" WHERE "students"."id" = ?  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 82ms (Views: 1.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
StudentsControllerTest: test_should_destroy_with_unauthorized_user
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "q7ZUnkT2ZarOSoAxezflbA"], ["created_at", "2014-07-31 10:09:12.558500"], ["email", "lorem@gloverwalter.biz"], ["name", "Student"], ["password_digest", "$2a$04$znu7ac5.o9qoCC6.w6/kMeiS5UCaiwYe7tuo6.MDrOnSc/suKc9N6"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.558500"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.561306"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.561306"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "O8ZClwEIC4JCXH0B081TgQ"], ["created_at", "2014-07-31 10:09:12.564785"], ["email", "lorem@corwin.info"], ["name", "Student"], ["password_digest", "$2a$04$MO8Gt3eDABGSSNZMCpw6nO37ZEnOr/nZDV2hDpevgmyLJHT.kHKDK"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.564785"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
Filter chain halted as :authorize_student rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
StudentsControllerTest: test_should_index_with_with_authenticated_user
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Pfj2uX6WrO1tsrEvpkcLMw"], ["created_at", "2014-07-31 10:09:12.573477"], ["email", "lorem@quigley.info"], ["name", "Student"], ["password_digest", "$2a$04$/r1vuV4O4FzoCDoLpLD8vuhU5UMSSaxlmqNVRJmyFWQ4KWQxjL9q6"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.573477"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.576170"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.576170"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#index as JSON
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.2ms)[0m  [1mSELECT "students".* FROM "students"[0m
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
StudentsControllerTest: test_should_index_with_with_unauthenticated_user
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "mTIz4_N8oOF9pGri22ORrw"], ["created_at", "2014-07-31 10:09:12.586569"], ["email", "lorem@osinski.info"], ["name", "Student"], ["password_digest", "$2a$04$rM6NUJeTHT6cNW0rV5dY9.NJi.syF2VE4JNDmSvnHiXbyG4WVMhvO"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.586569"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.589323"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.589323"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#index as JSON
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
StudentsControllerTest: test_should_registration_confirm
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "w2v9wWNmn-cPEZ-iIjlzGw"], ["created_at", "2014-07-31 10:09:12.596215"], ["email", "lorem@nolan.biz"], ["name", "Student"], ["password_digest", "$2a$04$zJ3qkMn.VPuPt.4HldfBY.C4vC6rhCk7RGFLkHrNMKESEOOyiAA5C"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.596215"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.598873"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.598873"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#registration_confirm as JSON
  Parameters: {"confirmation_token"=>"w2v9wWNmn-cPEZ-iIjlzGw", "id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "students" SET "confirmation_token" = ?, "state" = ?, "updated_at" = ? WHERE "students"."id" = 980190963  [["confirmation_token", "O8zBLBrumv2TRA3iwQdvCg"], ["state", "active"], ["updated_at", "2014-07-31 10:09:12.602901"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_authenticated_student
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "us1tEkgGPueIwEOfu4kaFg"], ["created_at", "2014-07-31 10:09:12.608917"], ["email", "lorem@barton.info"], ["name", "Student"], ["password_digest", "$2a$04$OKl4CEZh4XlseVJz1DztX.OWpkOFxCTrNW0gU53dnwe8eq2u6/TL6"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.608917"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.611457"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.611457"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mNotice Load (0.1ms)[0m  SELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?  [["noticable_id", 980190963], ["noticable_type", "Student"]]
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_unauthenticated_student
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "qobczB8daasHF9UtWuhJVQ"], ["created_at", "2014-07-31 10:09:12.622377"], ["email", "lorem@bartolettialtenwerth.com"], ["name", "Student"], ["password_digest", "$2a$04$shwMlKx5hQSbzuYpTm7Qvusfj/Ajm1GSR4svSgj.YZWrNpjVcDuTO"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.622377"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:09:12.624986"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.624986"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_unauthenticated_user
------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "pR1P4M3Yk2u4wOFRfJkQoA"], ["created_at", "2014-07-31 10:09:12.631889"], ["email", "lorem@johnsbraun.name"], ["name", "Student"], ["password_digest", "$2a$04$9mBcL6ZYsYE47GKglvtwiuLMijy86gVHx9nZQDKX2jjC2SFmLmZ4e"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.631889"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:09:12.634477"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.634477"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
StudentsControllerTest: test_should_subscribe_to_subject_with_student
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "e1L6vcV5hnmZ8YEvR0ttew"], ["created_at", "2014-07-31 10:09:12.641330"], ["email", "lorem@borer.com"], ["name", "Student"], ["password_digest", "$2a$04$D6qshJfxXUMt4IVB/r7TPuR496WIJTvK2wKfjqJ5LU153YZ6F9a/e"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.641330"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:09:12.644405"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.644405"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#subscribe_to_subject as JSON
  Parameters: {"subject_id"=>1, "id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mSubject Load (0.1ms)[0m  [1mSELECT  "subjects".* FROM "subjects"  WHERE "subjects"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubjectStudent Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subject_students"  WHERE ("subject_students"."student_id" = 980190963 AND "subject_students"."subject_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subject_students" ("created_at", "student_id", "subject_id", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-07-31 10:09:12.691518"], ["student_id", 980190963], ["subject_id", 1], ["updated_at", "2014-07-31 10:09:12.691518"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
StudentsControllerTest: test_should_update_password
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "oGOPeLZtbqfhAV53_qDA4A"], ["created_at", "2014-07-31 10:09:12.697205"], ["email", "lorem@champlin.biz"], ["name", "Student"], ["password_digest", "$2a$04$PjfQJ/8xPQeVnQvq2Mekte0ChPuIJQvDWpmSKIIyycyMos62UBcG."], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.697205"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.699702"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.699702"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#update_password as JSON
  Parameters: {"student"=>{"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mUsers::StudentPasswordUpdateType Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  UPDATE "students" SET "confirmation_token" = ?, "password_digest" = ?, "updated_at" = ? WHERE "students"."id" = 980190963  [["confirmation_token", "dE8LcToD-ARgNRQjmwjiMA"], ["password_digest", "$2a$04$EvKBEaW0yQb4zJeQnHYNN.eHDmNChbCNUsFBZy/6ClGvQFBc8n4ZG"], ["updated_at", "2014-07-31 10:09:12.708739"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
StudentsControllerTest: test_should_update_with_unauthorized_user
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "AEIsdEO-1L7eFixXWcDElw"], ["created_at", "2014-07-31 10:09:12.714112"], ["email", "lorem@homenick.org"], ["name", "Student"], ["password_digest", "$2a$04$g6ckSK/u5Zvvbb4irHyEauZJj309MZjOrqwz0K2JPuOtTb9FFFuka"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.714112"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:09:12.716585"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:09:12.716585"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "1ZM3MbBEvk94wkkejXFBHQ"], ["created_at", "2014-07-31 10:09:12.720037"], ["email", "lorem@leuschke.name"], ["name", "Student"], ["password_digest", "$2a$04$eaOdY.Zrck0x6SaKDr5hMOau6kE/vo.8tuI3YdAMw6kcennJYhyHi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:09:12.720037"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#update as JSON
  Parameters: {"student"=>{"name"=>"Student", "password"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :authorize_student rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "teachers"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-31 10:22:01', '2014-07-31 10:22:01', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-31 10:22:01', '2014-07-31 10:22:01', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "students"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-31 10:22:01', '2014-07-31 10:22:01', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-31 10:22:01', '2014-07-31 10:22:01', 298486374)
  [1m[36m (193.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
AdminsControllerTest: test_should_create_admin
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
AdminsControllerTest: test_should_destroy_admin
-----------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
AdminsControllerTest: test_should_get_edit
------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
AdminsControllerTest: test_should_get_index
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
AdminsControllerTest: test_should_get_new
-----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
AdminsControllerTest: test_should_show_admin
--------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
AdminsControllerTest: test_should_update_admin
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "teachers"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-31 10:28:38', '2014-07-31 10:28:38', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "teachers" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2014-07-31 10:28:38', '2014-07-31 10:28:38', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "students"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-31 10:28:38', '2014-07-31 10:28:38', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "students" ("created_at", "updated_at", "id") VALUES ('2014-07-31 10:28:38', '2014-07-31 10:28:38', 298486374)
  [1m[36m (141.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------------------------
StudentsControllerTest: test_should_create_with_invalid_params
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "UfirlvdKQyY8-kcMzInE7A"], ["created_at", "2014-07-31 10:28:38.939971"], ["email", "lorem@sanfordwalter.info"], ["name", "Student"], ["password_digest", "$2a$04$vXro/p34tEk/4uCBpQZUB.A0ESuW0kxEFbxv/PLFgeD7xTC5zlbU."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:38.939971"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:38.956013"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:38.956013"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#create as JSON
  Parameters: {"student"=>{"email"=>"florentiyygmail.com", "password"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUsers::StudentRegistrationType Exists (0.1ms)[0m  SELECT  1 AS one FROM "students"  WHERE "students"."email" = 'florentiyygmail.com' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 13ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
StudentsControllerTest: test_should_create_with_valid_params
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "O8z7d5n_wNaYGgYeMprQKA"], ["created_at", "2014-07-31 10:28:38.978582"], ["email", "lorem@boyle.net"], ["name", "Student"], ["password_digest", "$2a$04$btijqC/NlJYC4isNu28a1OlIXSPYQHTE6aZ2y/YL.l96lVEAUBwuq"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:38.978582"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:38.981267"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:38.981267"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#create as JSON
  Parameters: {"student"=>{"email"=>"florentiyy@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUsers::StudentRegistrationType Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "students"  WHERE "students"."email" = 'florentiyy@gmail.com' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["confirmation_token", "4qTE6uIDI2QjZQwY8Gnc2Q"], ["created_at", "2014-07-31 10:28:38.987521"], ["email", "florentiyy@gmail.com"], ["password_digest", "$2a$04$VigZfIo0NyS0kuHn4K.M4eUYs92V5A3pgg1mSJfHgJ0qa6cT9XBti"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:38.987521"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m

UserMailer#confirmation_email: processed outbound mail in 14.5ms

Sent mail to florentiyy@gmail.com (7.1ms)
Date: Thu, 31 Jul 2014 14:28:39 +0400
From: fansarmailer@gmail.com
To: florentiyy@gmail.com
Message-ID: <53da1a577238_1c1aa39e90488a7@olegeg-RC530-RC730.mail>
Subject: =?UTF-8?Q?=D0=9F=D0=BE=D0=B4=D1=82=D0=B2=D0=B5=D1=80=D0=B6=D0=B4=D0=B5=D0=BD=D0=B8=D0=B5?=
 =?UTF-8?Q?_=D1=80=D0=B5=D0=B3=D0=B8=D1=81=D1=82=D1=80=D0=B0=D1=86=D0=B8=D0=B8?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: base64

0JfQtNGA0LDQstGB0YLQstGD0LnRgtC1LCDQo9GH0LXQvdC40LoK0J/QvtC0
0YLQstC10YDQtNC40YLQtSDRgdCy0L7QuSDQsNC60LrQsNGD0L3Rgi4K0KHR
i9C70LvQutCwINC00LvRjyDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyA6
IAo8YSBocmVmPSJodHRwOi8vbG9jYWxob3N0OjMwMDAvc3R1ZGVudHMvOTgw
MTkwOTY0L3JlZ2lzdHJhdGlvbl9jb25maXJtP2NvbmZpcm1hdGlvbl90b2tl
bj00cVRFNnVJREkyUWpaUXdZOEduYzJRIj7Qn9C+0LTRgtCy0LXRgNC00LjR
gtGMINCw0LrQutCw0YPQvdGCPC9hPgo=

Completed 201 Created in 55ms (Views: 4.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
StudentsControllerTest: test_should_destroy_with_autorized_student
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "WwwYCbiOVnL1T6if_TJ93w"], ["created_at", "2014-07-31 10:28:39.042589"], ["email", "lorem@heel.net"], ["name", "Student"], ["password_digest", "$2a$04$Qyi4aKl47yfwDpOTDD8DlOJq6.Q30Ej894IeQ2v.pqIF2zP9rDOuu"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.042589"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.045354"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.045354"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mStudent Load (0.2ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHomework Load (0.1ms)[0m  SELECT "homeworks".* FROM "homeworks"  WHERE "homeworks"."student_id" = ?  [["student_id", 980190963]]
  [1m[36mNotice Load (0.1ms)[0m  [1mSELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?[0m  [["noticable_id", 980190963], ["noticable_type", "Student"]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "students" WHERE "students"."id" = ?  [["id", 980190963]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 57ms (Views: 1.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
StudentsControllerTest: test_should_destroy_with_unauthorized_user
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "IceHgel7GFx_SSqh1XYHpQ"], ["created_at", "2014-07-31 10:28:39.108584"], ["email", "lorem@fritsch.org"], ["name", "Student"], ["password_digest", "$2a$04$RuPiAmpmcWZYMXd/oMm5RuO0jW69yMqEskP8LChG3LrZ6MCZH6Y16"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.108584"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.111434"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.111434"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "0fywXvGtKpNKPVJPbR9NJQ"], ["created_at", "2014-07-31 10:28:39.114916"], ["email", "lorem@sauerpurdy.name"], ["name", "Student"], ["password_digest", "$2a$04$p25z6jVULOzgzOqrIufw4umC1/E24aJXqbvwHpRBhItN4hCUVNo1O"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.114916"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
Filter chain halted as :authorize_student rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
StudentsControllerTest: test_should_index_with_with_authenticated_user
----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "b_qgGxBeLBaBfoMzW9GixQ"], ["created_at", "2014-07-31 10:28:39.123299"], ["email", "lorem@lynch.info"], ["name", "Student"], ["password_digest", "$2a$04$DjyHXUtcNO6g9XptM.fwGutA1dmXgQzSpxRBka7EUjuZCj4n0jDnW"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.123299"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.125870"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.125870"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#index as JSON
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.2ms)[0m  [1mSELECT "students".* FROM "students"[0m
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
StudentsControllerTest: test_should_index_with_with_unauthenticated_user
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Ejwo-_HTwGF9VYhfrXPSrQ"], ["created_at", "2014-07-31 10:28:39.136003"], ["email", "lorem@bogisich.info"], ["name", "Student"], ["password_digest", "$2a$04$MLJAMjgh4PgSCNMRFrB4OOsrR/0Y4cXRgop4kzckN5JEmSsq1eNIm"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.136003"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.138898"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.138898"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#index as JSON
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
StudentsControllerTest: test_should_registration_confirm
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "fY1SQx4Ti8NwJyQUQT4GWg"], ["created_at", "2014-07-31 10:28:39.145804"], ["email", "lorem@sanford.org"], ["name", "Student"], ["password_digest", "$2a$04$muQ8ckwkykYrBf0RwHL0xOYguvkAp1mXM0x.gwrTBMYZI4SEpQqA6"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.145804"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.148455"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.148455"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#registration_confirm as JSON
  Parameters: {"confirmation_token"=>"fY1SQx4Ti8NwJyQUQT4GWg", "id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "students" SET "confirmation_token" = ?, "state" = ?, "updated_at" = ? WHERE "students"."id" = 980190963  [["confirmation_token", "j1Q2F-nE7YQs8Hic21CmWQ"], ["state", "active"], ["updated_at", "2014-07-31 10:28:39.152582"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_authenticated_student
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "mHDZc8g-ZBbAeqbRGcEtUA"], ["created_at", "2014-07-31 10:28:39.158626"], ["email", "lorem@jones.org"], ["name", "Student"], ["password_digest", "$2a$04$a3K2KPt962nZ8hHq4Pc6seM3Arkan4oBLkiaGVq86DZx1Rxr9pQQq"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.158626"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.161143"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.161143"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mNotice Load (0.1ms)[0m  SELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?  [["noticable_id", 980190963], ["noticable_type", "Student"]]
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_unauthenticated_student
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "uvOBC4fVDQWr7dXnYhMXQg"], ["created_at", "2014-07-31 10:28:39.171808"], ["email", "lorem@harberblanda.com"], ["name", "Student"], ["password_digest", "$2a$04$3iz3SSHe8g2DGFt/I5OIGujBm6M9sJ09xayVC0cuF1eQVI2zvup2y"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.171808"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.174468"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.174468"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
StudentsControllerTest: test_should_show_with_unauthenticated_user
------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "cG5ciuL5JaaefBPUmBXe1Q"], ["created_at", "2014-07-31 10:28:39.181550"], ["email", "lorem@priceruecker.biz"], ["name", "Student"], ["password_digest", "$2a$04$4xS1ytSvnscUgQ/KkKuxDeyicSVhyktxoDyC4TqI0803qPhycM4yu"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.181550"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.184325"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.184325"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
StudentsControllerTest: test_should_subscribe_to_subject_with_student
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "m7EpXoijMrsj92P_bL6m0w"], ["created_at", "2014-07-31 10:28:39.191246"], ["email", "lorem@wisozk.name"], ["name", "Student"], ["password_digest", "$2a$04$aw8gk7EeMhwfY3wayARKBueZBAvGgzvZU.dZ4/S5eSKIOFBpghJAy"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.191246"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.194008"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.194008"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#subscribe_to_subject as JSON
  Parameters: {"subject_id"=>1, "id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mSubject Load (0.1ms)[0m  [1mSELECT  "subjects".* FROM "subjects"  WHERE "subjects"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSubjectStudent Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subject_students"  WHERE ("subject_students"."student_id" = 980190963 AND "subject_students"."subject_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subject_students" ("created_at", "student_id", "subject_id", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.213154"], ["student_id", 980190963], ["subject_id", 1], ["updated_at", "2014-07-31 10:28:39.213154"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
StudentsControllerTest: test_should_update_password
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "ZFZjoizeDshRkASYNStYyA"], ["created_at", "2014-07-31 10:28:39.218753"], ["email", "lorem@bednarzemlak.biz"], ["name", "Student"], ["password_digest", "$2a$04$R9oZRHtAzisHHgbrik6Xz.SQ1eWDEioTPJwFcETmYUmBHRkz7/oGu"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.218753"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.221272"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.221272"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by StudentsController#update_password as JSON
  Parameters: {"student"=>{"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mUsers::StudentPasswordUpdateType Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  UPDATE "students" SET "confirmation_token" = ?, "password_digest" = ?, "updated_at" = ? WHERE "students"."id" = 980190963  [["confirmation_token", "0O2AA3Fcbi-GjUsBdyne6Q"], ["password_digest", "$2a$04$c4zXkrYBqpjvRI7ODQ4B0.sDVmNdQ3rCyHfFpmclrkuhUMREVRlla"], ["updated_at", "2014-07-31 10:28:39.230135"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
StudentsControllerTest: test_should_update_with_unauthorized_user
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "8wQs7tcEYGvY3N-lTtWQpA"], ["created_at", "2014-07-31 10:28:39.235694"], ["email", "lorem@gislason.org"], ["name", "Student"], ["password_digest", "$2a$04$HjygQF6b49bYnuenkSFIOerLvHuQ6SYkKLc.lJOZF6fmuh43pBZ2q"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.235694"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.238185"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.238185"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "3b3d2n3HpFdvYaPrJXWO3g"], ["created_at", "2014-07-31 10:28:39.241603"], ["email", "lorem@batzstark.biz"], ["name", "Student"], ["password_digest", "$2a$04$w.VMuEVB7VK3I1XbYHu6YeJqzAZFv.tBkc/kYDpIOmuc5CuGfWOPe"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.241603"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by StudentsController#update as JSON
  Parameters: {"student"=>{"name"=>"Student", "password"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :authorize_student rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------
NoticesControllerTest: test_should_destroy_notice_with_authorize_user
---------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "notices" ("created_at", "text", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.288248"], ["text", "WOW text"], ["updated_at", "2014-07-31 10:28:39.288248"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "sk9qW9tjlYp9Ub9MBhHORw"], ["created_at", "2014-07-31 10:28:39.300701"], ["email", "lorem@turner.net"], ["name", "Alexander"], ["password_digest", "$2a$04$3dny0AO./TQH1cN5dG7U2eANzZEu.Qmuk/rTkLW8URncllan4VeVy"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.300701"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
NoticesControllerTest: test_should_read_notice_with_authorize_user
------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "notices" ("created_at", "text", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.303985"], ["text", "WOW text"], ["updated_at", "2014-07-31 10:28:39.303985"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "jc1-LEO29XWMYYL4neISFw"], ["created_at", "2014-07-31 10:28:39.307525"], ["email", "lorem@christiansenondricka.net"], ["name", "Alexander"], ["password_digest", "$2a$04$0RWC.51t1KUSsBS6F6Txvu4VYzHV9ck2Y7BhdlochN8qOH0G8C/yG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.307525"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
TeachersControllerTest: test_should_create
------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "IPhAniAyKZGli8CyiOUFDg"], ["created_at", "2014-07-31 10:28:39.356371"], ["email", "lorem@hettinger.name"], ["name", "Alexander"], ["password_digest", "$2a$04$6CVzcD6hQ9IDBKUcZrX3jO2l3nPn8mL1DcU7wM6xUDdbKN/0b1d3K"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.356371"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#create as JSON
  Parameters: {"teacher"=>{"email"=>"1nsaffff@mail.ru", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUsers::TeacherRegistrationType Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "teachers"  WHERE "teachers"."email" = '1nsaffff@mail.ru' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["confirmation_token", "Mo0rCSC5gG19fLU70IUggw"], ["created_at", "2014-07-31 10:28:39.367361"], ["email", "1nsaffff@mail.ru"], ["password_digest", "$2a$04$E.cBbJY.npgqZY7ApsYrJ.Ip4/EJ.kDccly4M19ToBAexBe/HHvr."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.367361"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m

UserMailer#confirmation_email: processed outbound mail in 4.8ms

Sent mail to 1nsaffff@mail.ru (4.6ms)
Date: Thu, 31 Jul 2014 14:28:39 +0400
From: fansarmailer@gmail.com
To: 1nsaffff@mail.ru
Message-ID: <53da1a5760020_1c1aa39e904897b@olegeg-RC530-RC730.mail>
Subject: =?UTF-8?Q?=D0=9F=D0=BE=D0=B4=D1=82=D0=B2=D0=B5=D1=80=D0=B6=D0=B4=D0=B5=D0=BD=D0=B8=D0=B5?=
 =?UTF-8?Q?_=D1=80=D0=B5=D0=B3=D0=B8=D1=81=D1=82=D1=80=D0=B0=D1=86=D0=B8=D0=B8?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: base64

0JfQtNGA0LDQstGB0YLQstGD0LnRgtC1LCDQn9GA0LXQv9C+0LTQsNCy0LDR
gtC10LvRjArQn9C+0LTRgtCy0LXRgNC00LjRgtC1INGB0LLQvtC5INCw0LrQ
utCw0YPQvdGCLgrQodGL0LvQu9C60LAg0LTQu9GPINC/0L7QtNGC0LLQtdGA
0LbQtNC10L3QuNGPIDogCjxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6MzAw
MC9zdHVkZW50cy85ODAxOTA5NjQvcmVnaXN0cmF0aW9uX2NvbmZpcm0/Y29u
ZmlybWF0aW9uX3Rva2VuPU1vMHJDU0M1Z0cxOWZMVTcwSVVnZ3ciPtCf0L7Q
tNGC0LLQtdGA0LTQuNGC0Ywg0LDQutC60LDRg9C90YI8L2E+Cg==

Completed 201 Created in 48ms (Views: 11.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------
TeachersControllerTest: test_should_destroy_with_authorized_teacher
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "dNtFKTIDNZeeHl5RoTL9cA"], ["created_at", "2014-07-31 10:28:39.413200"], ["email", "lorem@denesik.org"], ["name", "Alexander"], ["password_digest", "$2a$04$ilC6zUHzvBQWY2JUX4.1KeaTaASB2.leFeP8VVg9z5vp9i9idMd4m"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.413200"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[36mTeacher Load (0.2ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLecture Load (0.1ms)[0m  [1mSELECT "lectures".* FROM "lectures"  WHERE "lectures"."teacher_id" = ?[0m  [["teacher_id", 980190963]]
  [1m[35mNotice Load (0.0ms)[0m  SELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?  [["noticable_id", 980190963], ["noticable_type", "Teacher"]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "teachers" WHERE "teachers"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 21ms (Views: 1.7ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
TeachersControllerTest: test_should_destroy_with_unauthorized_user
------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "hpHmM-aCON6A3Q6z8yOqfg"], ["created_at", "2014-07-31 10:28:39.441801"], ["email", "lorem@jerde.com"], ["name", "Alexander"], ["password_digest", "$2a$04$YAPXql5faxizge/C97mszO1QjcPiUP7mUhxrZoPf5pAcprlfQXACO"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.441801"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "Km8vYx-doscdCWd-5TPHlA"], ["created_at", "2014-07-31 10:28:39.446376"], ["email", "lorem@mraz.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$BptmtcoAs1XoX8MWNSwV..1KzKXGFn9ONlGsebGJK9idftymRxTIa"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.446376"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#destroy as JSON
  Parameters: {"id"=>"980190963"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :authorize_teacher rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------
TeachersControllerTest: test_should_index_with_with_authenticated_user
----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "0l02C35SnZZZGvJNIlnXmg"], ["created_at", "2014-07-31 10:28:39.454606"], ["email", "lorem@ryan.com"], ["name", "Alexander"], ["password_digest", "$2a$04$BHSbhF9j2NNbC1bDPjCjFeYGZWy4X9A9zPA9QWYZU67mCHzyS/Fy."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.454606"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#index as JSON
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mTeacher Load (0.2ms)[0m  [1mSELECT "teachers".* FROM "teachers"[0m
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------
TeachersControllerTest: test_should_index_with_with_unauthenticated_user
------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "zLDlS2Kh4IeTmQWKLc1n3w"], ["created_at", "2014-07-31 10:28:39.465204"], ["email", "lorem@effertz.org"], ["name", "Alexander"], ["password_digest", "$2a$04$OHassX/8yh2tnDu5NAphIOxkfT26ysFAewECcSS0YavjdWack0.Ti"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.465204"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#index as JSON
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------
TeachersControllerTest: test_should_registration_confirm
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "MbR6mfPsqiXR9F5fK4psxA"], ["created_at", "2014-07-31 10:28:39.473473"], ["email", "lorem@dubuque.net"], ["name", "Alexander"], ["password_digest", "$2a$04$n88N0wdxNNOURr3x4uQfEuvebbjqnMA1O6B5Z08hKL6ssaMhQEP9a"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.473473"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#registration_confirm as JSON
  Parameters: {"confirmation_token"=>"MbR6mfPsqiXR9F5fK4psxA", "id"=>"980190963"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "teachers" SET "confirmation_token" = ?, "state" = ?, "updated_at" = ? WHERE "teachers"."id" = 980190963  [["confirmation_token", "6pWiXHAydQpmLYZBuI1oaA"], ["state", "active"], ["updated_at", "2014-07-31 10:28:39.478899"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
TeachersControllerTest: test_should_show_with_teacher
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "nefqeAw9TKWLv7CPU0kYpA"], ["created_at", "2014-07-31 10:28:39.486022"], ["email", "lorem@bergstrom.name"], ["name", "Alexander"], ["password_digest", "$2a$04$z1cQhpQW6QjR.edni4IYYuOSymQT920f7h2qQWW7z826g3Hreciy6"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.486022"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#show as JSON
  Parameters: {"id"=>"980190963"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mNotice Load (0.1ms)[0m  [1mSELECT "notices".* FROM "notices"  WHERE "notices"."noticable_id" = ? AND "notices"."noticable_type" = ?[0m  [["noticable_id", 980190963], ["noticable_type", "Teacher"]]
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
TeachersControllerTest: test_should_show_with_unauthenticated_user
------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "UGlsHaDPALiGtTub91Fm1w"], ["created_at", "2014-07-31 10:28:39.497352"], ["email", "lorem@lind.name"], ["name", "Alexander"], ["password_digest", "$2a$04$MEZYulcy8XRaFQbOBTozfOvYgYa1pFt66UxVIAvmHvHzbNkGfBQqe"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.497352"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by TeachersController#show as JSON
  Parameters: {"id"=>"980190963"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
TeachersControllerTest: test_should_update_password
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "lHBXO7ynBdEyJRaDgPz3QQ"], ["created_at", "2014-07-31 10:28:39.505555"], ["email", "lorem@lindlabadie.info"], ["name", "Alexander"], ["password_digest", "$2a$04$.FJNvSX1FfHN3doZOalc.uxmuUBzBlM.z0wRpcFRIf8.WFVoD2DmS"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.505555"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#update_password as JSON
  Parameters: {"teacher"=>{"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190963"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mUsers::TeacherPasswordUpdateType Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  UPDATE "teachers" SET "confirmation_token" = ?, "password_digest" = ?, "updated_at" = ? WHERE "teachers"."id" = 980190963  [["confirmation_token", "q5ohP0P-2HQ6fET4Kw-WXA"], ["password_digest", "$2a$04$EDMwAmZESG8h/6.mAqz6guDG.MJfQR/JF/XjiF/6RL2Pyf9HL0hqC"], ["updated_at", "2014-07-31 10:28:39.515035"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
TeachersControllerTest: test_should_update_with_unauthorized_user
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "NoXBSC9JohXzYsalsViAPQ"], ["created_at", "2014-07-31 10:28:39.520620"], ["email", "lorem@marvinmraz.info"], ["name", "Alexander"], ["password_digest", "$2a$04$ESJn5FSymKJlHbFTfhhysu/RYWDzkJFTc4b/q6Da.77DzJmsABywS"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.520620"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "UrXj04vHuISsVB7VQmj2RA"], ["created_at", "2014-07-31 10:28:39.524982"], ["email", "lorem@ko.info"], ["name", "Alexander"], ["password_digest", "$2a$04$FjHUdYIkjkdylVtmQH2Efunp0IYWPFzMlDB25yzcqimDj1l3CgRZG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.524982"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by TeachersController#update as JSON
  Parameters: {"teacher"=>{"name"=>"Alexander"}, "id"=>"980190963"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
Filter chain halted as :authorize_teacher rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
AdminsControllerTest: test_should_create_admin
----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
AdminsControllerTest: test_should_destroy_admin
-----------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
AdminsControllerTest: test_should_get_edit
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
AdminsControllerTest: test_should_get_index
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
AdminsControllerTest: test_should_get_new
-----------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
AdminsControllerTest: test_should_show_admin
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
AdminsControllerTest: test_should_update_admin
----------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
HomeworksControllerTest: test_should_create_with_student
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "nSm8F5wCYhakgeeuz9j75Q"], ["created_at", "2014-07-31 10:28:39.546702"], ["email", "lorem@kemmer.name"], ["name", "Student"], ["password_digest", "$2a$04$GsLAoxQxDN8mshu/x.9YIO/KIzQ95TNIpTimg.1g3DKXJZuR6XcYO"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.546702"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "jFnXEBX_q-AuyyY-4ZWmBw"], ["created_at", "2014-07-31 10:28:39.551906"], ["email", "lorem@kovacektromp.com"], ["name", "Student"], ["password_digest", "$2a$04$.hqU3DCyb4F46aiw0KJmjOzJniTo3rod1oJSEmJkbxIhzDpzFpgye"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.551906"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "AZc6HU0aGDq0QF65ahStOg"], ["created_at", "2014-07-31 10:28:39.561283"], ["email", "lorem@mosciski.org"], ["name", "Alexander"], ["password_digest", "$2a$04$c1sYBN6C2Ka00NUP1lKeP.hEXd3e9rYe1TIiD5C0li0vIRjqqA3DG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.561283"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.564061"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.564061"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.565821"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.565821"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.614089"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.614089"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "JPP82KpnDFJsj-TU0b7T1A"], ["created_at", "2014-07-31 10:28:39.619033"], ["email", "lorem@barton.com"], ["name", "Alexander"], ["password_digest", "$2a$04$RIe.WHjrSOk7ToqQNlTnfOvi1DZTlpaaC4DhiZ6gr7WzE/KVkkdaq"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.619033"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.620751"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.620751"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.621904"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190964], ["updated_at", "2014-07-31 10:28:39.621904"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#create as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"2"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mLecture Load (0.2ms)[0m  [1mSELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mHomeworkType Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "homeworks"  WHERE ("homeworks"."student_id" = 980190964 AND "homeworks"."lecture_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.647896"], ["lecture_id", 2], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.647896"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 25ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
HomeworksControllerTest: test_should_create_with_teacher
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "5DamCrN9wf15Bq1pysmMhA"], ["created_at", "2014-07-31 10:28:39.653810"], ["email", "lorem@lebsack.net"], ["name", "Student"], ["password_digest", "$2a$04$6ykG3cH.tMgZHZA4wngwGO4S.EcguQJXY3O7kupJNME8la7ZlQYjy"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.653810"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "Nc4QXmwnb41rO00f-vUlig"], ["created_at", "2014-07-31 10:28:39.657678"], ["email", "lorem@mccullough.info"], ["name", "Student"], ["password_digest", "$2a$04$79uebl9lQrfrSq9FuSftkOYHEAE7xxAMPfXho2rzC9DolJkmduod2"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.657678"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "kby3vU_t_8kJf99_nkPesw"], ["created_at", "2014-07-31 10:28:39.661772"], ["email", "lorem@leannon.info"], ["name", "Alexander"], ["password_digest", "$2a$04$whkfevzAaaHGQLWIOkmj0ecyfUkC8JMJlfJ5dzghoGD4WbVHf/yqG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.661772"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.663576"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.663576"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.664751"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.664751"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.665900"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.665900"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "rnPTF3rX7u3_BImVV5e-Cw"], ["created_at", "2014-07-31 10:28:39.670006"], ["email", "lorem@rippin.org"], ["name", "Alexander"], ["password_digest", "$2a$04$.BNtVkjxzr3RpgVsbfBnx.G2d6mgVhY/Vwx/LYeuM8Mo51xTqjSAi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.670006"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.671595"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.671595"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.672685"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190964], ["updated_at", "2014-07-31 10:28:39.672685"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "_79R07axGOCRQwgpzRtV8g"], ["created_at", "2014-07-31 10:28:39.675820"], ["email", "lorem@monahan.com"], ["name", "Alexander"], ["password_digest", "$2a$04$HDiydTUsrpW8qySJjI6OIurjUJLbGp8641ndC2t4bN7YbXaG0.Hra"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.675820"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#create as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"2"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190965]]
Filter chain halted as :homework_create_authorize rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
HomeworksControllerTest: test_should_create_with_unauthenticated_user
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "U_Q-RkwsEDfNhaM-CeIL0Q"], ["created_at", "2014-07-31 10:28:39.683918"], ["email", "lorem@welch.net"], ["name", "Student"], ["password_digest", "$2a$04$VFF7/YjzN792DmXL8O6xaOhr7dL1aRKCXdt3AkGtDRwwTz1qWMgXS"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.683918"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "bjC8dbHdbidVhOuC00RHRg"], ["created_at", "2014-07-31 10:28:39.687852"], ["email", "lorem@kuhic.org"], ["name", "Student"], ["password_digest", "$2a$04$a0uqSbi30mqnEYkd34wekOzOVYZGvJDyOILqFWxLuHHCmdkOn3pL."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.687852"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "Y9HGHpkJpVlhXN1GrLpp6A"], ["created_at", "2014-07-31 10:28:39.691775"], ["email", "lorem@shanahan.net"], ["name", "Alexander"], ["password_digest", "$2a$04$RovgAcOpCPJHurj3p.jM2./4JEyuX9cSkQ4u1Sg9SJnwGl3fJwho6"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.691775"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.693416"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.693416"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.694557"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.694557"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.695719"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.695719"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "-eH4O_CLrRjQyDha-shczA"], ["created_at", "2014-07-31 10:28:39.699818"], ["email", "lorem@streich.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$iS/sgvhEWjCJE.7poJaIKe/ZSA/YXee/tYe.tdUFsdHfp85fv1FOS"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.699818"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.701360"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.701360"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.702476"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190964], ["updated_at", "2014-07-31 10:28:39.702476"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#create as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"2"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------
HomeworksControllerTest: test_should_destroy_with_authorized_student
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "v9kq3OctF0OstqT-NNJCHQ"], ["created_at", "2014-07-31 10:28:39.709519"], ["email", "lorem@lebsack.name"], ["name", "Student"], ["password_digest", "$2a$04$//hXVM122efUIMFT3yteluED073NtBup69VpXiJ90r3HIs4Evuujy"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.709519"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "A0yllBTEw-vPucPylwukbQ"], ["created_at", "2014-07-31 10:28:39.713713"], ["email", "lorem@erdmanlabadie.org"], ["name", "Student"], ["password_digest", "$2a$04$m819n3UInyjnBq1EXhmEI.adMySX/B9Qset.mmE22m7XuX1fZk1Ay"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.713713"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "LbfiMPGeLe0YH2HYDfYn1w"], ["created_at", "2014-07-31 10:28:39.717637"], ["email", "lorem@nicolasgrimes.name"], ["name", "Alexander"], ["password_digest", "$2a$04$MZBsEDGgMS7TKM0MBlWkWO2Nc9eAmGBmRWbwT/60wBC3RpnJ/nuCi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.717637"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.719281"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.719281"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.720463"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.720463"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.721593"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.721593"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#destroy as JSON
  Parameters: {"lecture_id"=>"1", "id"=>"1"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mHomeworkType Load (0.1ms)[0m  [1mSELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?  [["docable_id", 1], ["docable_type", "Homework"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "homeworks" WHERE "homeworks"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLecture Load (0.0ms)[0m  [1mSELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "delayed_jobs" ("created_at", "handler", "run_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.738468"], ["handler", "--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/class 'SubjectStudent'\nmethod_name: :calculate_average_score_and_homeworks_count_for\nargs:\n- !ruby/ActiveRecord:Student\n  attributes:\n    id: 980190964\n    name: Student\n    email: lorem@erdmanlabadie.org\n    password_digest: $2a$04$m819n3UInyjnBq1EXhmEI.adMySX/B9Qset.mmE22m7XuX1fZk1Ay\n    confirmation_token: A0yllBTEw-vPucPylwukbQ\n    state: inactive\n    grade: 9\n    created_at: 2014-07-31 10:28:39.713713000 Z\n    updated_at: 2014-07-31 10:28:39.713713000 Z\n    avatar: \n    birthday: \n    phone: \n    city: \n    surname: \n    middlename: \n    school: \n    reset_password_token: \n- !ruby/ActiveRecord:Lecture\n  attributes:\n    id: 1\n    name: Lecture\n    subject_id: 1\n    teacher_id: 980190963\n    created_at: 2014-07-31 10:28:39.720463000 Z\n    updated_at: 2014-07-31 10:28:39.720463000 Z\n"], ["run_at", "2014-07-31 10:28:39.738371"], ["updated_at", "2014-07-31 10:28:39.738468"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------
HomeworksControllerTest: test_should_destroy_with_unauthorized_student
----------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "lSYfqKjIcGMjc4FQ2iLUow"], ["created_at", "2014-07-31 10:28:39.743971"], ["email", "lorem@swift.com"], ["name", "Student"], ["password_digest", "$2a$04$SFCEm1RVV2o1QO3DOMxhZ.khGdCx.HnL9aMtkLkTI6g6Wj14.hahC"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.743971"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "zR8OnrPhGNhEbeRnEI00_A"], ["created_at", "2014-07-31 10:28:39.747801"], ["email", "lorem@jacobs.com"], ["name", "Student"], ["password_digest", "$2a$04$huia7uh13jcU7gJHE1qlM..h61nSyEebZvI0oq2SYGQh54T.zF87O"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.747801"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "w-474QHjsNCX_bsPnY-miw"], ["created_at", "2014-07-31 10:28:39.751781"], ["email", "lorem@johnsonbergstrom.net"], ["name", "Alexander"], ["password_digest", "$2a$04$ocffDPaQguS42FAGvC9UwOaVj3xaG.3F1sWeubbE/7LcZNAKvzs32"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.751781"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.753494"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.753494"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.754654"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.754654"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.755821"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.755821"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#destroy as JSON
  Parameters: {"lecture_id"=>"1", "id"=>"1"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mHomeworkType Load (0.0ms)[0m  SELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
Filter chain halted as :homework_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
HomeworksControllerTest: test_should_rate_homework_with_authorized_teacher
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "WbwjaJ1MeL-p9X4_M7BHJw"], ["created_at", "2014-07-31 10:28:39.764744"], ["email", "lorem@dickinson.org"], ["name", "Student"], ["password_digest", "$2a$04$h6YD4orw4Be8zb0ZkhnMUeNJUfJzxqDABCoB7ezs7LmCFAY2x2KGi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.764744"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "t8mKpvSh6acqsA-l35Xcsg"], ["created_at", "2014-07-31 10:28:39.768977"], ["email", "lorem@ullrich.info"], ["name", "Student"], ["password_digest", "$2a$04$hreRpFWHKRdQstnENklvn.9otoVvvYZtw9czOPSz6RgRbp85IOHpq"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.768977"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "GF4sojUZZwqU7WaAZ9Cnhg"], ["created_at", "2014-07-31 10:28:39.773172"], ["email", "lorem@heidenreich.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$D1/kgkgWAEn47gPDqgo5g.WGmk8qLH3yGU0beE8cj.txV7Bf4rJoy"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.773172"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.774905"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.774905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.776084"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.776084"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.777227"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.777227"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#rate as HTML
  Parameters: {"score"=>"100", "lecture_id"=>"1", "id"=>"1"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mHomeworkType Load (0.0ms)[0m  [1mSELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mLecture Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHomeworkType Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "homeworks"  WHERE ("homeworks"."student_id" = 980190964 AND "homeworks"."id" != 1 AND "homeworks"."lecture_id" = 1) LIMIT 1[0m
  [1m[35mDocument Load (0.0ms)[0m  SELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?  [["docable_id", 1], ["docable_type", "Homework"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "homeworks" SET "score" = ?, "updated_at" = ? WHERE "homeworks"."id" = 1[0m  [["score", 100], ["updated_at", "2014-07-31 10:28:39.784430"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 6ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------
HomeworksControllerTest: test_should_update_with_authorized_student
-------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "mDhpfpfMMQ98IUhZPTyN1g"], ["created_at", "2014-07-31 10:28:39.789709"], ["email", "lorem@torphyhansen.name"], ["name", "Student"], ["password_digest", "$2a$04$lWATOUBbNmpOS1N9447vq.eazKM.FjRxC6HwHRp9j8qAsuf.TIuw."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.789709"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "p4lmT_Z0I1fkqnrIGoeUig"], ["created_at", "2014-07-31 10:28:39.793535"], ["email", "lorem@marks.biz"], ["name", "Student"], ["password_digest", "$2a$04$fyWluLQSsPD0bxtvGI9oP.O2RbZVIwLLD.WaZKmIbFqCCL7t3/zpG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.793535"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "yoB0yfCbiN0tZFdVhHo7vw"], ["created_at", "2014-07-31 10:28:39.797310"], ["email", "lorem@cormier.info"], ["name", "Alexander"], ["password_digest", "$2a$04$fYkbPrvpw3.R/zfeCokQ/eWw6GmR8beh2rLwzT1fKGgM4slAK6UCy"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.797310"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.798977"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.798977"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.800383"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.800383"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.801696"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.801696"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by HomeworksController#update as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"1", "id"=>"1"}
  [1m[36mStudent Load (0.1ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mHomeworkType Load (0.0ms)[0m  SELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mStudent Load (0.0ms)[0m  [1mSELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHomeworkType Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "homeworks"  WHERE ("homeworks"."student_id" = 980190964 AND "homeworks"."id" != 1 AND "homeworks"."lecture_id" = 1) LIMIT 1[0m
  [1m[35mDocument Load (0.0ms)[0m  SELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?  [["docable_id", 1], ["docable_type", "Homework"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------
HomeworksControllerTest: test_should_update_with_unauthorized_student
---------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "eg5sr_VnM447zDoQDncYOw"], ["created_at", "2014-07-31 10:28:39.812716"], ["email", "lorem@runolfon.name"], ["name", "Student"], ["password_digest", "$2a$04$BV6E10dDu/.pZ8X1dmOINuru1s27S1PalK1Hy9sfHPIiCC7pbxgw."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.812716"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "EYvxIkoLdMXemzgwciUk_A"], ["created_at", "2014-07-31 10:28:39.816605"], ["email", "lorem@jaskolski.info"], ["name", "Student"], ["password_digest", "$2a$04$rGqBDfPpAQZvDBWle/637.BzLgbpLuVrP3FMsbNfuAdkc.HeMthN6"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.816605"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "pETXjj-YU76xos-9ZDPsfQ"], ["created_at", "2014-07-31 10:28:39.820503"], ["email", "lorem@tremblay.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$pypcoVPKLAPJGy1V.lmK/.NYF7Pm2qDSjNWXlafVlD7DW1Lu...De"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.820503"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.822145"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.822145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.823345"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.823345"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "homeworks" ("created_at", "lecture_id", "score", "student_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.824493"], ["lecture_id", 1], ["score", 0], ["student_id", 980190964], ["updated_at", "2014-07-31 10:28:39.824493"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by HomeworksController#update as JSON
  Parameters: {"homework"=>{"documents_attributes"=>{}}, "lecture_id"=>"1", "id"=>"1"}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mHomeworkType Load (0.0ms)[0m  [1mSELECT  "homeworks".* FROM "homeworks"  WHERE "homeworks"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mStudent Load (0.0ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190964]]
Filter chain halted as :homework_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------
LecturesControllerTest: test_should_create_with_invalid_params
--------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.833912"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.833912"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "RcYuNawzmmmBKvw6JRjeFg"], ["created_at", "2014-07-31 10:28:39.838154"], ["email", "lorem@cormiergaylord.org"], ["name", "Alexander"], ["password_digest", "$2a$04$8.kHXXBvBNfLI/EPsNnLqu6OfK7gJOnAluOclZ7YwIbBxIF1hVBcO"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.838154"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.839878"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.839878"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.841009"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.841009"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "qKUjZUQgfrgO7nQdOqxGFg"], ["created_at", "2014-07-31 10:28:39.844816"], ["email", "lorem@heaney.info"], ["name", "Student"], ["password_digest", "$2a$04$oOMKTnsETU3/AXe2.eh01Oue3Caeq8jfrYz3stbflLFSpgQ4nFObG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.844816"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "KEQ3Ewhy8EhndRmk1XRZ8g"], ["created_at", "2014-07-31 10:28:39.848372"], ["email", "lorem@schillerberge.com"], ["name", "Alexander"], ["password_digest", "$2a$04$raj7S.FCJAZFd5KzEd/.yuMaBAA0EgaJ4fpGxEOZVGRX/hZjmH2a."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.848372"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#create as JSON
  Parameters: {"lecture"=>{"subject_id"=>1, "name"=>""}}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 9ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
LecturesControllerTest: test_should_create_with_student
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.862736"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.862736"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "dq7bbjZLG0KFRv5sIX28cQ"], ["created_at", "2014-07-31 10:28:39.867029"], ["email", "lorem@gottlieb.org"], ["name", "Alexander"], ["password_digest", "$2a$04$3u9Alqg6Oh/2rNuynpg2OuAPbuvuNZUo0WqA0jZztT92ZXeEH4L7."], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.867029"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.868776"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.868776"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.869900"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.869900"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "tKEmtGIru0l1_4Hvxx8-2A"], ["created_at", "2014-07-31 10:28:39.873845"], ["email", "lorem@shanahan.info"], ["name", "Student"], ["password_digest", "$2a$04$cltlT.GNMO4lz9Tx70ubh.g9/.KHcf8pmA4.ZB/plt6F.R2gOwrYS"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.873845"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "fBSnsWTNRN3OCWR6sTODLw"], ["created_at", "2014-07-31 10:28:39.877380"], ["email", "lorem@streich.com"], ["name", "Alexander"], ["password_digest", "$2a$04$/FyYkGnl/JdoiK35Wr2Ot.0/iVaUACPJDcdThVQyNm7uOawblyl/m"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.877380"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#create as JSON
  Parameters: {"lecture"=>{"name"=>"Lecture"}}
  [1m[35mStudent Load (0.1ms)[0m  SELECT  "students".* FROM "students"  WHERE "students"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :lecture_create_authorize rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------
LecturesControllerTest: test_should_create_with_valid_params
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.882742"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.882742"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "hwB7FNDjHOZgtDymo9jo9g"], ["created_at", "2014-07-31 10:28:39.886834"], ["email", "lorem@connellyokuneva.info"], ["name", "Alexander"], ["password_digest", "$2a$04$robrhPd0gB4Iazc/5NE5LezjrZwA.h5fGtQK8XiFhS5cxK2N09kBy"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.886834"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.888557"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.888557"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.889698"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.889698"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "dO4sdbwQ4sXVDcGp5Q9VOg"], ["created_at", "2014-07-31 10:28:39.893904"], ["email", "lorem@oconner.biz"], ["name", "Student"], ["password_digest", "$2a$04$d0WeC5aZ/MDYsfr.ux7uauEu7XYxqLxSZp2tD09VIgxyTQoWMdabm"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.893904"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "gt2E01MUyuUddCoU6PvQog"], ["created_at", "2014-07-31 10:28:39.897749"], ["email", "lorem@huelshowe.name"], ["name", "Alexander"], ["password_digest", "$2a$04$h.Nhvou6mR7lo80AQSRGJe21IC9hmj/.e2qTA3iHMlI180cZEQqyi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.897749"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#create as JSON
  Parameters: {"lecture"=>{"subject_id"=>1, "name"=>"Lecture"}}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.902492"], ["name", "Lecture"], ["subject_id", 1], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.902492"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 8ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------
LecturesControllerTest: test_should_destroy_with_creator
--------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.909852"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.909852"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "DBQqCOt6j41msmi7DHoI6g"], ["created_at", "2014-07-31 10:28:39.913895"], ["email", "lorem@wintheiserheidenreich.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$5sgE2P.tIpDP.7Q2zz2eI.KmlpqUpK1L2BHK8UJaR/cWnmDZdmSbG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.913895"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:39.915619"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.915619"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.916761"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.916761"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "zyl1ifZ4hSJXxY8xMYo7Gw"], ["created_at", "2014-07-31 10:28:39.920745"], ["email", "lorem@satterfield.org"], ["name", "Student"], ["password_digest", "$2a$04$FoIbtvDsmVQa8s.H/0umxeXDxLEbsAIDTpDY4xCu0wN1TD41QKOLW"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.920745"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "zE7GjX_ujTPq0P77clTjtg"], ["created_at", "2014-07-31 10:28:39.924621"], ["email", "lorem@krajcik.name"], ["name", "Alexander"], ["password_digest", "$2a$04$d/H15zQeOe78jbTssdJ6COwxwr9wAxyV9YsMynDJMb4qSZefv5Vd2"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.924621"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mLectureType Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mDocument Load (0.0ms)[0m  [1mSELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?[0m  [["docable_id", 1], ["docable_type", "Lecture"]]
  [1m[35mVideo Load (3.0ms)[0m  SELECT "videos".* FROM "videos"  WHERE "videos"."lecture_id" = ?  [["lecture_id", 1]]
  [1m[36mHomework Load (0.1ms)[0m  [1mSELECT "homeworks".* FROM "homeworks"  WHERE "homeworks"."lecture_id" = ?[0m  [["lecture_id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "lectures" WHERE "lectures"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 53ms (Views: 2.2ms | ActiveRecord: 3.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
LecturesControllerTest: test_should_destroy_with_not_creator
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.982367"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.982367"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "RUZIG9TBtiA4wXvn9o4_AA"], ["created_at", "2014-07-31 10:28:39.986506"], ["email", "lorem@jenkinszulauf.info"], ["name", "Alexander"], ["password_digest", "$2a$04$lXJTkaR6GD/BbEexrJx0ieJNA5Gf5Au91HPbNCK1RlMLMcXkH8.7a"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.986506"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:39.988298"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:39.988298"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:39.989455"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:39.989455"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "mooZg8VUXcmSm8r2oqqcPA"], ["created_at", "2014-07-31 10:28:39.993610"], ["email", "lorem@feil.name"], ["name", "Student"], ["password_digest", "$2a$04$h7yOVRYC3xeOZCXVCMzX4OCwxksNNxnoLeRp1OxYBtBVPOjlHL/I2"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.993610"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "bKNWEO4k7N2QnCS2hr85CA"], ["created_at", "2014-07-31 10:28:39.997397"], ["email", "lorem@jaskolski.com"], ["name", "Alexander"], ["password_digest", "$2a$04$VdW/akchz8N6BdYUhJXGQ..mRIKtXH2imG8MBMiGMt3yDn7mMFDlG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:39.997397"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#destroy as JSON
  Parameters: {"id"=>"1"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190964]]
  [1m[36mLectureType Load (0.0ms)[0m  [1mSELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
Filter chain halted as :lecture_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------
LecturesControllerTest: test_should_index_with_authenticate_user
----------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.003760"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.003760"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "3JZEKtcDyJmZCst0EpZiQA"], ["created_at", "2014-07-31 10:28:40.008021"], ["email", "lorem@damorebailey.org"], ["name", "Alexander"], ["password_digest", "$2a$04$orICADjn6Y1PDRfGsblPEO3nb9sSuELvW4zwecms41NrBM8CfvBri"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.008021"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.009968"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.009968"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.011292"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:40.011292"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "xYUr9drG-IEMRjiL1tnDZw"], ["created_at", "2014-07-31 10:28:40.015274"], ["email", "lorem@hauck.name"], ["name", "Student"], ["password_digest", "$2a$04$syhkyBipkbqRoEHzuhVng.8v6W9VJjc8wky13eclQpDPKc4oqSbBi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.015274"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "xKyAGsdYQuTf51BuTWfNRQ"], ["created_at", "2014-07-31 10:28:40.018807"], ["email", "lorem@wiegandyost.net"], ["name", "Alexander"], ["password_digest", "$2a$04$Fzuofr.8YQs.DGvHBMD8O.19dPqdwNzH3Ov1ckqxuSQKRI4PCnP0m"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.018807"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#index as JSON
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mLecture Load (0.1ms)[0m  SELECT "lectures".* FROM "lectures"
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
LecturesControllerTest: test_should_index_with_unauthenticate_user
------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.025879"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.025879"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "kEVBxVqeSYBqahLMFPIMzQ"], ["created_at", "2014-07-31 10:28:40.030005"], ["email", "lorem@effertz.info"], ["name", "Alexander"], ["password_digest", "$2a$04$O8Cl/ppAiIhNuEGK2FvOxeIELI5zWhppkNHzxuT2Qu5PQmhxVyLxC"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.030005"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.031743"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.031743"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.032887"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:40.032887"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "gFydP1r3g6y-WC40i6YzrQ"], ["created_at", "2014-07-31 10:28:40.036906"], ["email", "lorem@donnelly.biz"], ["name", "Student"], ["password_digest", "$2a$04$yPtd7.vCwOnCnq7rAx5OGuF5.4KZTULEZ2AiPat7dzUafNe8a6i5i"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.036906"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "5XwbcxYzjwHIKHm4gsT2cw"], ["created_at", "2014-07-31 10:28:40.040712"], ["email", "lorem@kiehnankunding.name"], ["name", "Alexander"], ["password_digest", "$2a$04$yPg3rQTIzwbrxeHYl6E49uKJHmsr0whmftcncxSvLtv61W4h6XToi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.040712"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#index as JSON
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
LecturesControllerTest: test_should_show_with_authenticate_user
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.045515"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.045515"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "A8JHgoQW9zcKuQF_VydNXg"], ["created_at", "2014-07-31 10:28:40.049610"], ["email", "lorem@dickinsonmurphy.com"], ["name", "Alexander"], ["password_digest", "$2a$04$hrUbR4atieWCkELmwgGYj.VGmddnlP83.oZzFo6BmcCeBjQhYk2Bi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.049610"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.051383"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.051383"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.052511"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:40.052511"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "5ij8zN6jpGTNF24aZzpzaA"], ["created_at", "2014-07-31 10:28:40.056403"], ["email", "lorem@kerlukeschmidt.org"], ["name", "Student"], ["password_digest", "$2a$04$LG/FVWFjyhpb4K6iD3uMn.zEwBsR5TYxw42jg/TsNeVb7l9ST.TRa"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.056403"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "JvGtORYlHTIHe2d0NpgRMA"], ["created_at", "2014-07-31 10:28:40.059913"], ["email", "lorem@watsicatrantow.info"], ["name", "Alexander"], ["password_digest", "$2a$04$nAdkvh2FMXGKUjZNB5YOEubDH6XjU6T95KVH092.IzB5gqQQX7Rzi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.059913"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
  [1m[35mLectureType Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mVideo Load (0.1ms)[0m  [1mSELECT "videos".* FROM "videos"  WHERE "videos"."lecture_id" = ?[0m  [["lecture_id", 1]]
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------
LecturesControllerTest: test_should_show_with_unauthenticate_user
-----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.067875"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.067875"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "SNYmLS6FWHcMORUMGEFkwg"], ["created_at", "2014-07-31 10:28:40.072165"], ["email", "lorem@huelreichert.info"], ["name", "Alexander"], ["password_digest", "$2a$04$V0UDo58MUJmVtdrC2NZCjOlNvKPVcOWWuH2a9GeA5xlQZGB/vZu9a"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.072165"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.074080"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.074080"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:40.075344"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:40.075344"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "y3gKK3-2raAZc-GitjseOg"], ["created_at", "2014-07-31 10:28:40.079218"], ["email", "lorem@stiedemann.biz"], ["name", "Student"], ["password_digest", "$2a$04$0WgEFVgi1kHd5fTX46xXgeL.3ZSYUuUHvQ5bk0LcsNKckDXA3W4NS"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.079218"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "f8nPeNL-O04atYeAG4dVjw"], ["created_at", "2014-07-31 10:28:40.082693"], ["email", "lorem@oberbrunner.org"], ["name", "Alexander"], ["password_digest", "$2a$04$QzC2JRMbUSOUy55KSICh2.GL9A/s6WYKv9.qLW9s7R301F2aT81EK"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.082693"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#show as JSON
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
LecturesControllerTest: test_should_update_with_creator
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.087370"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.087370"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "LAJo-Y0yk9ZuXPQH07vqzg"], ["created_at", "2014-07-31 10:28:40.091542"], ["email", "lorem@whitedach.org"], ["name", "Alexander"], ["password_digest", "$2a$04$ORvhK/5ojFjJbTMA68Fs8uzN2XPDD3em1Ra49xN45p0C0E6qvfoke"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.091542"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.093254"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.093254"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", "2014-07-31 10:28:40.094375"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:40.094375"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "E1ag4fSumjBtzY9UpGSY3w"], ["created_at", "2014-07-31 10:28:40.098408"], ["email", "lorem@lakin.name"], ["name", "Student"], ["password_digest", "$2a$04$mWLL7Lck2AwoyUEwsuWkIuQySKTK5p/PyjM2DcniVxPL8IUNF8gTe"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.098408"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "DTaDNIUky7fOx9ErK3mO_g"], ["created_at", "2014-07-31 10:28:40.102227"], ["email", "lorem@stanton.com"], ["name", "Alexander"], ["password_digest", "$2a$04$sNpAn/gm8SCQl5C.f5WcauIHD9kwu/PHVHoZSRzFo812hyzH8xGWq"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.102227"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by LecturesController#update as JSON
  Parameters: {"lecture"=>{"name"=>"Lecture"}, "id"=>"1"}
  [1m[35mTeacher Load (0.1ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36mLectureType Load (0.0ms)[0m  [1mSELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mTeacher Load (0.0ms)[0m  SELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mDocument Load (0.0ms)[0m  SELECT "documents".* FROM "documents"  WHERE "documents"."docable_id" = ? AND "documents"."docable_type" = ?  [["docable_id", 1], ["docable_type", "Lecture"]]
  [1m[36mVideo Load (0.0ms)[0m  [1mSELECT "videos".* FROM "videos"  WHERE "videos"."lecture_id" = ?[0m  [["lecture_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------
LecturesControllerTest: test_should_update_with_not_creator
-----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.112409"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.112409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "oWgwPMuh3sq9SntfgWyGQA"], ["created_at", "2014-07-31 10:28:40.116478"], ["email", "lorem@carroll.com"], ["name", "Alexander"], ["password_digest", "$2a$04$RxmfosBKdrSBZkvkc1Y1F.C9A6YFBlf4FUs6f77cMuEcE/vfH8Agi"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.116478"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "subjects" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", "2014-07-31 10:28:40.118160"], ["name", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ°"], ["updated_at", "2014-07-31 10:28:40.118160"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "lectures" ("created_at", "name", "subject_id", "teacher_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", "2014-07-31 10:28:40.119322"], ["name", "Lecture"], ["subject_id", 2], ["teacher_id", 980190963], ["updated_at", "2014-07-31 10:28:40.119322"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "students" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["confirmation_token", "R5yWMzQqREpUFzLjD_LzOg"], ["created_at", "2014-07-31 10:28:40.123262"], ["email", "lorem@lehnermcclure.net"], ["name", "Student"], ["password_digest", "$2a$04$73wZvhesLZLQ/smxlZrPbOhw/vOCvB983UooJ893ExorBeLpec9DG"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.123262"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "teachers" ("confirmation_token", "created_at", "email", "name", "password_digest", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["confirmation_token", "8O__4JHn-ZtqJ29D8VEP1w"], ["created_at", "2014-07-31 10:28:40.126720"], ["email", "lorem@gerlachkonopelski.biz"], ["name", "Alexander"], ["password_digest", "$2a$04$YSKsccG7iHdanZ7h8HomV.LXGgy9yZjUgqtBeP9rVEHyc/MIst5AW"], ["state", "inactive"], ["updated_at", "2014-07-31 10:28:40.126720"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by LecturesController#update as JSON
  Parameters: {"lecture"=>{"name"=>"Lecture"}, "id"=>"1"}
  [1m[36mTeacher Load (0.1ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190964]]
  [1m[35mLectureType Load (0.0ms)[0m  SELECT  "lectures".* FROM "lectures"  WHERE "lectures"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.0ms)[0m  [1mSELECT  "teachers".* FROM "teachers"  WHERE "teachers"."id" = ? LIMIT 1[0m  [["id", 980190963]]
Filter chain halted as :lecture_destroy_and_update_authorize rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
